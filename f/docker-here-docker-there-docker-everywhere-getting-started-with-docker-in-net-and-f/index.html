<!DOCTYPE html>
<html>
    <head>

    
    <meta name="robots" content="all">
    

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="author" content="Michal Franc">
    <meta name="keywords" content="michal franc,leader,programmer,coach,speaker">
	<title>Docker here docker there docker everywhere - Getting started with docker in .NET with F# | Michal Franc</title>
	<meta name="description" content="If you are in IT world, you surely heard or read about docker. There was / is a huge hype about this technology. It looks like this one might actually surviv...">

    <link href="https://fonts.googleapis.com/css?family=Inconsolata:700|Raleway" rel="stylesheet">
    <link rel="profile" href="http://gmpg.org/xfn/11">
    <link rel="author" href="https://plus.google.com/104238159697387202725?rel=author">

	<link rel="canonical" href="http://www.mfranc.com/f/docker-here-docker-there-docker-everywhere-getting-started-with-docker-in-net-and-f/">

    <link rel="stylesheet" href="/css/main.css">
	<link rel="stylesheet" type="text/css" href="/css/sm.css" media="screen" />
    <link rel="alternate" type="application/rss+xml" title="Michal Franc | Feed" href="http://feeds.feedburner.com/PassionateProgram">

    <meta property="og:locale" content="en_US">
    <meta property="og:title" content="Docker here docker there docker everywhere - Getting started with docker in .NET with F# | Michal Franc">
    <meta property="og:description" content="If you are in IT world, you surely heard or read about docker. There was / is a huge hype about this technology. It looks like this one might actually surviv...">
	<meta property="og:url" content="http://www.mfranc.com/f/docker-here-docker-there-docker-everywhere-getting-started-with-docker-in-net-and-f/">
    <meta property="og:site_name" content="Michal Franc Blog">
    <meta property="og:type" content="website">
	<meta property="og:image" content="http://michal-franc.github.io/images/default_share_image.jpg">

	<meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Docker here docker there docker everywhere - Getting started with docker in .NET with F# | Michal Franc">
    <meta name="twitter:site" content="@francmichal">
    <meta name="twitter:creator" content="@francmichal">
    <meta name="twitter:description" content="If you are in IT world, you surely heard or read about docker. There was / is a huge hype about this technology. It looks like this one might actually surviv...">
	<meta name="twitter:image" content="http://michal-franc.github.io/images/default_share_image.jpg">

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-15894596-3', 'auto');
  ga('send', 'pageview');
</script>

    <script src="//static.getclicky.com/js" type="text/javascript"></script>
<script type="text/javascript">try{ clicky.init(100563098); }catch(e){}</script>
<noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/100563098ns.gif" /></p></noscript>

    <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

    <!-- Facebook Pixel Code -->
<script>
!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
document,'script','https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '1817837425153843'); // Insert your pixel ID here.
fbq('track', 'PageView');
</script>
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=1817837425153843&ev=PageView&noscript=1"
/></noscript>
<!-- DO NOT MODIFY -->
<!-- End Facebook Pixel Code -->


  </head>


  <body>
    <main>
      <header class="site-header">
  <div class="container">
	  <h1><a href="/">Michal<span>Franc</span></a></h1>

    <button type="button" class="sliding-panel-button">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <nav class="navbar sliding-panel-content">
      <ul>
        
          <li><a href="/blog" title="Posts">Posts</a></li>
        
          <li><a href="/notes" title="Notes">Notes</a></li>
        
          <li><a href="/articles" title="Articles">Articles</a></li>
        
          <li><a href="/about" title="About">About</a></li>
        
        <li><a href="/feed.xml" target="_blank"><i class="icon icon-feed"></i></a></li>
      </ul>
    </nav>
  </div>
</header>

<div class="sliding-panel-fade-screen"></div>


      <div class="container">
        <article role="article" class="post">

  <div class="card">
    <header class="post-header">
      <h1 class="post-title">Docker here docker there docker everywhere - Getting started with docker in .NET with F#</h1>
      <p class="post-meta">Feb 7, 2015 • Michal Franc - 
		<small>
			<i class="icon icon-comments"></i><span class="disqus-comment-count" data-disqus-url="http://mfranc.com/f/docker-here-docker-there-docker-everywhere-getting-started-with-docker-in-net-and-f/"></span>
		</small>
		<small>
			
			<a class="tag-badge" href="/blog/tags/#docker">docker</a>
			
			<a class="tag-badge" href="/blog/tags/#f#">f#</a>
			
		</small>
	  </p>
    </header>

	<center>
		
	</center>

    <div class="post-content">
      
      <p><span style="line-height: 1.5;">If you are in IT world, you surely heard or read about docker. There was / is a huge hype about this technology. It looks like this one might actually survive the initial ‘It’s awesome phase’. I was looking for some info about docker. It was confusing to get to know what docker really is. Too much marketing buzz words everywhere. In this post I will sum up all my notes about how to start with docker in .NET and F#. It will be like learning journey that might end as a simple tutorial on where to start.</span></p>

<h3>Docker ?<span style="font-size: 1.5em; font-weight: 300; line-height: 1.5;"> </span> My first encounter with docker was through simple</h3>

<p><a href="https://www.docker.com/tryit">tutorial </a>. It’s a online interactive shell emulation that lets you execute some of the commands and get the basics of docker. Sadly, after finishing it you are left out with more questions than answers. You can start by reading <a href="https://www.docker.com/whatisdocker/">official site docs</a>. The most important thing to note is that docker is a kind of a runtime that enables you to create images that you can run on top of it.<span style="line-height: 1.5;">This concept is just like Virtual Machines, there are however differences. Docker is not creating full complete OS instance, instead it is creating lightweight containers that do share the kernel but are still isolated and separated from each other </span><a style="line-height: 1.5;" href="http://stackoverflow.com/questions/16047306/how-is-docker-io-different-from-a-normal-virtual-machine">more</a><span style="line-height: 1.5;">. This process is more efficient both in time and memory space. It is easier and faster to create smaller containers instead of full VM’s. There are however some cons, you won’t get full isolation but who really needs that ? Other problem is … Windows is currently not supporting those small containers, we can only run Unix beacuse docker is using ‘<a href="https://linuxcontainers.org/">Linux Containers</a>’. You can still run docker on Windows, but you can’t create windows images. Microsoft promised to provide this support in new Win version.</span></p>

<h3>Running Docker on Windows</h3>

<p>To start using docker on windows go to - <a href="https://docs.docker.com/installation/windows">https://docs.docker.com/installation/windows/</a>. Boot2Docker is all you need to get started. This tool will install VirtualBox, configure small Unix VM that you will use docker from and there is also a nice utility tool that will connect you to your virtual machine. Boot2Docker is a little unstable, while testing I encountered one issue with never ending docker loading. It looks like there are some with issues - https://forums.docker.com/t/boot2docker-hangs-then-crashes/401 . I had to reinstall Boot2Docker multiple times to get it working.</p>

<h3>F# + docker</h3>

<p>I want to create my first simple image that I will be able to use and write some F# code, compile and run it.There are existing images with F# that you can just download and start using, but in order to learn I want to create my own image. In order to do this I will define a docker file with set of instructions that define how to construct an image.</p>

<p><span style="line-height: 1.5;">Those instructions are stored in </span><a style="line-height: 1.5;" href="https://docs.docker.com/reference/builder/">DockerFile</a><span style="line-height: 1.5;"> without extensions or dots. Thankfully Boot2Docker does have vi on board so I can use it to create this file.</span></p>

<p><strong>1. touch DockerFile</strong> will create me a file First instruction would be to get me a Unix distro that I will run everything on top off.</p>

<figure class="highlight">
  <pre><code class="language-csharp" data-lang="csharp"><span class="n">DockerFile</span>
<span class="n">FROM</span> <span class="n">debian</span></code></pre>
</figure>

<p><strong>2. To build image</strong></p>

<p>Yey it works, behind the scenes it gets the debian DockerFile and goes from instruction to instruction creating a debian runtime. I could possibly write my own ‘debian’ image, but that would involve me learning about how to build Unix distro. Instead of that I can just point to external image and build on top of it. That is one of the beautiful things about docker. You can mix / match different images and build more complex ones using the basic ones.</p>

<p><strong>3. In order to compile F# app i will need mono and fsharp compiler</strong></p>

<figure class="highlight">
  <pre><code class="language-csharp" data-lang="csharp"><span class="n">DockerFile</span>
<span class="n">FROM</span> <span class="n">debian</span>
<span class="n">RUN</span> <span class="n">apt</span><span class="p">-</span><span class="k">get</span> <span class="p">-</span><span class="n">y</span> <span class="p">-</span><span class="n">q</span> <span class="n">install</span> <span class="n">mono</span><span class="p">-</span><span class="n">complete</span>
<span class="n">RUN</span> <span class="n">apt</span><span class="p">-</span><span class="k">get</span> <span class="p">-</span><span class="n">y</span> <span class="p">-</span><span class="n">q</span> <span class="n">install</span> <span class="n">fsharp</span></code></pre>
</figure>

<p>-y - “Always Yes” so if there is any prompt in ‘apt-get’ installer just say yes -q - Quiet - makes the log less verbose</p>

<p><strong>4. Building image</strong><br />
I got some errors from apt-get missing packages and the logs says to add - ‘apt-get update’. This is supposed to update the ‘apt-get’ list of packages.</p>

<figure class="highlight">
  <pre><code class="language-csharp" data-lang="csharp"><span class="n">DockerFile</span>
<span class="n">FROM</span> <span class="n">debian</span>
<span class="n">RUN</span> <span class="n">apt</span><span class="p">-</span><span class="k">get</span> <span class="n">update</span>
<span class="n">RUN</span> <span class="n">apt</span><span class="p">-</span><span class="k">get</span> <span class="p">-</span><span class="n">y</span> <span class="p">-</span><span class="n">q</span> <span class="n">mono</span><span class="p">-</span><span class="n">complete</span>
<span class="n">RUN</span> <span class="n">apt</span><span class="p">-</span><span class="k">get</span> <span class="p">-</span><span class="n">y</span> <span class="p">-</span><span class="n">q</span> <span class="n">fsharp</span></code></pre>
</figure>

<p>‘sudo docker build’ - and couple minutes later you should have a nice image with debian + mono + fsharp.</p>

<p><strong>5. Switching to more specialized image</strong><br />
Sadly in my case I got lot of errors while downloading ‘mono-complete’. Instead of building mono on my own, I have decided to change the base image and use some Unix distro with mono on board. Running ‘docker search mono’. Gave me a list of all the potential images, I decided to use ‘mono’.</p>

<figure class="highlight">
  <pre><code class="language-csharp" data-lang="csharp"><span class="n">DockerFile</span>
<span class="n">FROM</span> <span class="n">mono</span>
<span class="n">RUN</span> <span class="n">apt</span><span class="p">-</span><span class="k">get</span> <span class="n">update</span>
<span class="n">RUN</span> <span class="n">apt</span><span class="p">-</span><span class="k">get</span> <span class="p">-</span><span class="n">y</span> <span class="p">-</span><span class="n">q</span> <span class="n">install</span> <span class="n">fsharp</span>
<span class="n">RUN</span> <span class="n">apt</span><span class="p">-</span><span class="k">get</span> <span class="p">-</span><span class="n">y</span> <span class="p">-</span><span class="n">q</span> <span class="n">install</span> <span class="n">vim</span></code></pre>
</figure>

<p>Notice that I installing vim, I need some basic text editor to create first F# hello world app.</p>

<p><strong>6. What now ? -Starting container</strong> I have base image, there is no container yet. What is a container you may ask ? <a href="http://stackoverflow.com/questions/23735149/docker-image-vs-container">Container is a running instance of image</a>. <span style="line-height: 1.5;">To start interacting with container, you need to start some app on it. Most basic one is interactive shell, that will also enable me to work on top of container</span></p>

<p><strong>7. Testing out F#</strong> Lets see if fsharp is here fsharpi should start F# interactive.</p>

<p>Yey, it’s here. To exit just type quit#;;</p>

<p><strong>8</strong><span style="line-height: 1.5;"><strong>. Creating folder + hello world source file</strong></span> <span style="line-height: 1.5;"><strong></strong> I need folder and hello.fsx file</span></p>

<figure class="highlight">
  <pre><code class="language-csharp" data-lang="csharp"><span class="n">mkdir</span> <span class="n">fsharp</span><span class="p">-</span><span class="n">hello</span>
<span class="n">touch</span> <span class="n">hello</span><span class="p">.</span><span class="n">fsx</span></code></pre>
</figure>

<p><strong>9. Hello World App</strong></p>

<figure class="highlight">
  <pre><code class="language-csharp" data-lang="csharp"><span class="n">open</span> <span class="n">System</span>

<span class="na">[&lt;EntryPoint&gt;]</span>
<span class="k">let</span> <span class="n">main</span> <span class="n">argv</span> <span class="p">=</span>
<span class="err"> </span> <span class="err"> </span><span class="n">printfn</span> <span class="s">"Hello World"</span>
<span class="err"> </span> <span class="err"> </span><span class="m">0</span></code></pre>
</figure>

<p><strong>10. Compiling app</strong></p>

<figure class="highlight">
  <pre><code class="language-csharp" data-lang="csharp"><span class="n">fsharpc</span> <span class="n">hello</span><span class="p">.</span><span class="n">fsx</span></code></pre>
</figure>

<p><strong>11. Running Hello World App</strong></p>

<figure class="highlight">
  <pre><code class="language-csharp" data-lang="csharp"><span class="n">mono</span> <span class="n">hello</span><span class="p">.</span><span class="n">exe</span></code></pre>
</figure>

<p>Uff, done. That wasn’t that hard. Now, you might ask so what ? You just compiled Hello World app … I can do this on my local machine, yep but this</p>

<p><span style="line-height: 1.5;">brief tutorial is just a starting point, I have started exploring docker, because, I want to play with akka.net and F#. In next posts I will post more things about how to use docker to create multiple akka actors and how to write some simple distributed app. That will be fun, cause it is a new world for me. Docker is more complicated than that. It is quite </span>sophisticated<span style="line-height: 1.5;"> and you can create complex images with many </span>dependencies<span style="line-height: 1.5;">. </span> edit: <a href="https://www.vagrantup.com/blog/feature-preview-vagrant-1-6-docker-dev-environments.html">You can use vagrant with docker</a> <a href="https://devopsu.com/blog/docker-misconceptions/">Docker Misconceptions</a> <a style="line-height: 1.5;" href="http://pawel.sawicz.eu/">Pawel Sawicz</a><span style="line-height: 1.5;"> just send me a nice link with </span><a style="line-height: 1.5;" href="http://iops.io/blog/docker-hype/">some anty-hype opinion about docker</a> Another nice link <a href="http://phusion.github.io/baseimage-docker/">with some docker problems + a solution </a></p>

<p>Interesting links:
<a href="https://www.toptal.com/devops/getting-started-with-docker-simplifying-devops">Getting Started with Docker: Simplifying Devops</a></p>


      <span id="post-end"></span>
    </div>

    <div id="mc_embed_signup">
<form action="https://mfranc.us13.list-manage.com/subscribe/post?u=8a5865e28c59044d419ecbe95&amp;id=d545f31150" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
      <label for="mce-EMAIL">If you are interested in Cloud Native, Scalability, System Design and more meaty side of Engineering at Scale. Then subscribe to my mailing list.</label>
      <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
        <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_8a5865e28c59044d419ecbe95_d545f31150" tabindex="-1" value=""></div>
        <div class="clear">
          <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button">
        </div>
    </div>
</form>
</div>



    
<hr>

<aside id="comments" class="disqus">
  <div class="container">
    <h3><i class="icon icon-comments-o"></i> Comments</h3>
    <div id="disqus_thread"></div>
    <script>
      (function() {
        var d = document,
        s = d.createElement('script');
        s.src = '//thesilenceofthelams.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  </div>
</aside>



  </div>

</article>

      </div>


      <footer class="site-footer">
  <div class="container">
    <ul class="social">
  <li><a href="http://github.com/michal-franc" target="_blank"><i class="icon icon-github"></i></a></li>
  <li><a href="http://twitter.com/francmichal" target="_blank"><i class="icon icon-twitter"></i></a></li>
  <li><a href="http://facebook.com/michalfrancblog" target="_blank"><i class="icon icon-facebook"></i></a></li>
  <li><a href="https://uk.linkedin.com/in/michalfranc1" target="_blank"><i class="icon icon-linkedin"></i></a></li>
</ul>

    <p class="txt-medium-gray">
      <small>&copy;2018 All rights reserved. Made with <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> and ♥</small>
    </p>
  </div>
</footer>


      <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
	  <script type="text/javascript" src="/js/jquery.slick-modals.js"/></script>

	  <!-- <script id="ulp-remote" src="http://tools.mfranc.com/wp-content/plugins/layered-popups/js/remote.min.js?ver=5.89" data-handler="http://tools.mfranc.com/wp-admin/admin-ajax.php"></script>
	  <script>

		    (function ($) {
			"use strict";
			var objectPositionTop = $('#post-end').offset().top - window.innerHeight;

				ulp_add_event("onexit", {
					popup:		"4AXWiVSrZD71uqiP",
					mode:		"once-period",
					period:		30
				});

				ulp_add_event("onidle", {
					popup:		"85oltSbndJGZQzaW",
					mode:		"once-period",
					period:         30
				});

				ulp_add_event("onscroll", {
					popup:		"INyhHrwTzxjvcqEb",
					mode:		"once-period",
					period:         30,
					offset:		objectPositionTop / 2
				});

		    }(jQuery));

    </script> -->

		<script id="dsq-count-scr" src="//thesilenceofthelams.disqus.com/count.js" async></script>

		<div id="fb-root"></div>
		<script>(function(d, s, id) {
		  var js, fjs = d.getElementsByTagName(s)[0];
		  if (d.getElementById(id)) return;
		  js = d.createElement(s); js.id = id;
		  js.src = "//connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v2.7&appId=125980610784627";
		  fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'facebook-jssdk'));</script>
    </main>
  </body>
</html>
