<!DOCTYPE html>
<html>
    <head>

    
    <meta name="robots" content="all">
    

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="author" content="Michal Franc">
    <meta name="keywords" content="michal franc,leader,programmer,coach,speaker">
	<title>Node.js - simple web server with 'express' | Michal Franc</title>
	<meta name="description" content="I have been playing with Node.js recently. Mostly doing some small hobby projects. One of them needed server side badly, some of the cool features were not p...">

    <link href="https://fonts.googleapis.com/css?family=Inconsolata:700|Raleway" rel="stylesheet">
    <link rel="profile" href="http://gmpg.org/xfn/11">
    <link rel="author" href="https://plus.google.com/104238159697387202725?rel=author">

	<link rel="canonical" href="http://www.mfranc.com/node-js/node-js-simple-web-server-with-express/">

    <link rel="stylesheet" href="/css/main.css">
	<link rel="stylesheet" type="text/css" href="/css/sm.css" media="screen" />
    <link rel="alternate" type="application/rss+xml" title="Michal Franc | Feed" href="http://feeds.feedburner.com/PassionateProgram">

    <meta property="og:locale" content="en_US">
    <meta property="og:title" content="Node.js - simple web server with 'express' | Michal Franc">
    <meta property="og:description" content="I have been playing with Node.js recently. Mostly doing some small hobby projects. One of them needed server side badly, some of the cool features were not p...">
	<meta property="og:url" content="http://www.mfranc.com/node-js/node-js-simple-web-server-with-express/">
    <meta property="og:site_name" content="Michal Franc Blog">
    <meta property="og:type" content="website">
	<meta property="og:image" content="http://michal-franc.github.io/images/default_share_image.jpg">

	<meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Node.js - simple web server with 'express' | Michal Franc">
    <meta name="twitter:site" content="@francmichal">
    <meta name="twitter:creator" content="@francmichal">
    <meta name="twitter:description" content="I have been playing with Node.js recently. Mostly doing some small hobby projects. One of them needed server side badly, some of the cool features were not p...">
	<meta name="twitter:image" content="http://michal-franc.github.io/images/default_share_image.jpg">

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-15894596-3', 'auto');
  ga('send', 'pageview');
</script>

    <script src="//static.getclicky.com/js" type="text/javascript"></script>
<script type="text/javascript">try{ clicky.init(100563098); }catch(e){}</script>
<noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/100563098ns.gif" /></p></noscript>

    <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

    <!-- Facebook Pixel Code -->
<script>
!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
document,'script','https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '1817837425153843'); // Insert your pixel ID here.
fbq('track', 'PageView');
</script>
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=1817837425153843&ev=PageView&noscript=1"
/></noscript>
<!-- DO NOT MODIFY -->
<!-- End Facebook Pixel Code -->


  </head>


  <body>
    <main>
      <header class="site-header">
  <div class="container">
	  <h1><a href="/">Michal<span>Franc</span></a></h1>

    <button type="button" class="sliding-panel-button">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <nav class="navbar sliding-panel-content">
      <ul>
        
          <li><a href="/blog" title="Posts">Posts</a></li>
        
          <li><a href="/notes" title="Notes">Notes</a></li>
        
          <li><a href="/articles" title="Articles">Articles</a></li>
        
          <li><a href="/about" title="About">About</a></li>
        
        <li><a href="/feed.xml" target="_blank"><i class="icon icon-feed"></i></a></li>
      </ul>
    </nav>
  </div>
</header>

<div class="sliding-panel-fade-screen"></div>


      <div class="container">
        <article role="article" class="post">

  <div class="card">
    <header class="post-header">
      <h1 class="post-title">Node.js - simple web server with 'express'</h1>
      <p class="post-meta">Jun 6, 2013 • Michal Franc - 
		<small>
			<i class="icon icon-comments"></i><span class="disqus-comment-count" data-disqus-url="http://mfranc.com/node-js/node-js-simple-web-server-with-express/"></span>
		</small>
		<small>
			
			<a class="tag-badge" href="/blog/tags/#node.js">node.js</a>
			
		</small>
	  </p>
    </header>

	<center>
		
	</center>

    <div class="post-content">
      
      <p>I have been playing with Node.js recently. Mostly doing some small hobby projects. One of them needed server side badly, some of the cool features were not possible with the client side only web app.</p>

<p>I was thinking about using RoR, Asp.Net Mvc or NancyFX all of these frameworks suitable for the task. Then why Node ? Well, the answer is simple, FUN. There is a lot of hype around it. Community is very dynamic, lots of modules and extensions created on the daily basis. As a Passionate Developer, I also wanted to try something new. I can do .Net stuff at work and it is allways good to try something new and fresh.</p>

<h3>Basic Node.js server</h3>

<p>Let’s start with a very basic example, just to see the bare Node without the modules.</p>

<figure class="highlight">
  <pre><code class="language-csharp" data-lang="csharp"><span class="kt">var</span> <span class="n">http</span> <span class="p">=</span> <span class="nf">require</span><span class="p">(</span><span class="s">"http"</span><span class="p">);</span>
<span class="n">http</span><span class="p">.</span><span class="nf">createServer</span><span class="p">(</span><span class="nf">function</span> <span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">response</span><span class="p">.</span><span class="nf">writeHead</span><span class="p">(</span><span class="m">200</span><span class="p">,</span> <span class="p">{</span>
         <span class="err">'</span><span class="n">Content</span><span class="p">-</span><span class="n">Type</span><span class="err">'</span><span class="p">:</span> <span class="err">'</span><span class="n">text</span><span class="p">/</span><span class="n">plain</span><span class="err">'</span>
      <span class="p">});</span>
      <span class="n">response</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="err">'</span><span class="n">Simple</span> <span class="n">Simple</span> <span class="n">Fun</span><span class="err">'</span><span class="p">)</span>
      <span class="n">response</span><span class="p">.</span><span class="nf">end</span><span class="p">();</span>
<span class="p">}).</span><span class="nf">listen</span><span class="p">(</span><span class="m">5002</span><span class="p">);</span></code></pre>
</figure>

<p>Node is basically a javascript, but this time on the server side ( weeee best language in the world on the server side, how can you not love it ? ). This code is a implementation of a very simple server responding to each get request, with some funky message and code 200. The require statement is the implementation of a internal module system.</p>

<h3>Node.js with express module</h3>

<p>This was a really simple example. Sure you can write whole app like this, but there are modules that provide a nice layer of abstraction with all the the nasty details hidden. I have been using the <a href="http://expressjs.com/">express module</a>. It is a nice web application framework.</p>

<p>It provides</p>
<ul>
	<li>better wrappers to the  request and response</li>
	<li>support for view-engines</li>
	<li>routing mechanism</li>
	<li>cookies manipulation</li>
	<li>basic authentication</li>
	<li>more ...</li>
</ul>

<figure class="highlight">
  <pre><code class="language-csharp" data-lang="csharp"> <span class="kt">var</span> <span class="n">express</span> <span class="p">=</span> <span class="nf">require</span><span class="p">(</span><span class="s">"express"</span><span class="p">);</span>
 <span class="kt">var</span> <span class="n">app</span> <span class="p">=</span> <span class="nf">express</span><span class="p">();</span>

 <span class="cm">/* serves main page */</span>
 <span class="n">app</span><span class="p">.</span><span class="k">get</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="nf">function</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="n">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">res</span><span class="p">.</span><span class="nf">sendfile</span><span class="p">(</span><span class="err">'</span><span class="n">index</span><span class="p">.</span><span class="n">htm</span><span class="err">'</span><span class="p">)</span>
 <span class="p">});</span>

  <span class="n">app</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span><span class="s">"/user/add"</span><span class="p">,</span> <span class="nf">function</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="n">res</span><span class="p">)</span> <span class="p">{</span> 
	<span class="cm">/* some server side logic */</span>
	<span class="n">res</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="s">"OK"</span><span class="p">);</span>
  <span class="p">});</span>

 <span class="cm">/* serves all the static files */</span>
 <span class="n">app</span><span class="p">.</span><span class="k">get</span><span class="p">(/^(.+)</span><span class="err">$</span><span class="p">/,</span> <span class="nf">function</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="n">res</span><span class="p">){</span> 
     <span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="err">'</span><span class="k">static</span> <span class="n">file</span> <span class="n">request</span> <span class="p">:</span> <span class="err">'</span> <span class="p">+</span> <span class="n">req</span><span class="p">.</span><span class="k">params</span><span class="p">);</span>
     <span class="n">res</span><span class="p">.</span><span class="nf">sendfile</span><span class="p">(</span> <span class="n">__dirname</span> <span class="p">+</span> <span class="n">req</span><span class="p">.</span><span class="k">params</span><span class="p">[</span><span class="m">0</span><span class="p">]);</span> 
 <span class="p">});</span>

 <span class="kt">var</span> <span class="n">port</span> <span class="p">=</span> <span class="n">process</span><span class="p">.</span><span class="n">env</span><span class="p">.</span><span class="n">PORT</span> <span class="p">||</span> <span class="m">5000</span><span class="p">;</span>
 <span class="n">app</span><span class="p">.</span><span class="nf">listen</span><span class="p">(</span><span class="n">port</span><span class="p">,</span> <span class="nf">function</span><span class="p">()</span> <span class="p">{</span>
   <span class="n">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="s">"Listening on "</span> <span class="p">+</span> <span class="n">port</span><span class="p">);</span>
 <span class="p">});</span></code></pre>
</figure>

<p>The express module is loaded into app object. It is then used to define the routings, accepting POST and GET verb. The syntax is quite simple. You provide the regexp which matches the route and a function that is executed when the request is matched. Function gives the access to the request and response wrappers.</p>

<p>Some Notes:</p>
<ul>
	<li>(/^(.+)$/ regexp is not the best one, it matches almost everything and has to be defined as the last route. Still it works ok 	and  all the js, css files are being sent.</li>
	<li>__dirname is a global value containing the name of the main directory with the node script.</li>
</ul>


      <span id="post-end"></span>
    </div>

    <div id="mc_embed_signup">
<form action="https://mfranc.us13.list-manage.com/subscribe/post?u=8a5865e28c59044d419ecbe95&amp;id=d545f31150" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
      <label for="mce-EMAIL">If you are interested in Cloud Native, Scalability, System Design and more meaty side of Engineering at Scale. Then subscribe to my mailing list.</label>
      <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
        <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_8a5865e28c59044d419ecbe95_d545f31150" tabindex="-1" value=""></div>
        <div class="clear">
          <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button">
        </div>
    </div>
</form>
</div>



    
<hr>

<aside id="comments" class="disqus">
  <div class="container">
    <h3><i class="icon icon-comments-o"></i> Comments</h3>
    <div id="disqus_thread"></div>
    <script>
      (function() {
        var d = document,
        s = d.createElement('script');
        s.src = '//thesilenceofthelams.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  </div>
</aside>



  </div>

</article>

      </div>


      <footer class="site-footer">
  <div class="container">
    <ul class="social">
  <li><a href="http://github.com/michal-franc" target="_blank"><i class="icon icon-github"></i></a></li>
  <li><a href="http://twitter.com/francmichal" target="_blank"><i class="icon icon-twitter"></i></a></li>
  <li><a href="http://facebook.com/michalfrancblog" target="_blank"><i class="icon icon-facebook"></i></a></li>
  <li><a href="https://uk.linkedin.com/in/michalfranc1" target="_blank"><i class="icon icon-linkedin"></i></a></li>
</ul>

    <p class="txt-medium-gray">
      <small>&copy;2018 All rights reserved. Made with <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> and ♥</small>
    </p>
  </div>
</footer>


      <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
	  <script type="text/javascript" src="/js/jquery.slick-modals.js"/></script>

	  <!-- <script id="ulp-remote" src="http://tools.mfranc.com/wp-content/plugins/layered-popups/js/remote.min.js?ver=5.89" data-handler="http://tools.mfranc.com/wp-admin/admin-ajax.php"></script>
	  <script>

		    (function ($) {
			"use strict";
			var objectPositionTop = $('#post-end').offset().top - window.innerHeight;

				ulp_add_event("onexit", {
					popup:		"4AXWiVSrZD71uqiP",
					mode:		"once-period",
					period:		30
				});

				ulp_add_event("onidle", {
					popup:		"85oltSbndJGZQzaW",
					mode:		"once-period",
					period:         30
				});

				ulp_add_event("onscroll", {
					popup:		"INyhHrwTzxjvcqEb",
					mode:		"once-period",
					period:         30,
					offset:		objectPositionTop / 2
				});

		    }(jQuery));

    </script> -->

		<script id="dsq-count-scr" src="//thesilenceofthelams.disqus.com/count.js" async></script>

		<div id="fb-root"></div>
		<script>(function(d, s, id) {
		  var js, fjs = d.getElementsByTagName(s)[0];
		  if (d.getElementById(id)) return;
		  js = d.createElement(s); js.id = id;
		  js.src = "//connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v2.7&appId=125980610784627";
		  fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'facebook-jssdk'));</script>
    </main>
  </body>
</html>
