<!DOCTYPE html>
<html>
    <head>

    
    <meta name="robots" content="all">
    

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="author" content="Michal Franc">
    <meta name="keywords" content="michal franc,leader,programmer,coach,speaker">
	<title>From procedural to functional - an example in F# | Michal Franc</title>
	<meta name="description" content="In this blog post, I show little code review of a code sent to me by friend. The code is quite simple example on how to read XML file using XmlProvider. My f...">

    <link href="https://fonts.googleapis.com/css?family=Inconsolata:700|Raleway" rel="stylesheet">
    <link rel="profile" href="http://gmpg.org/xfn/11">
    <link rel="author" href="https://plus.google.com/104238159697387202725?rel=author">

	<link rel="canonical" href="http://www.mfranc.com/uncategorized/from-procedural-to-functional-an-example-in-f/">

    <link rel="stylesheet" href="/css/main.css">
	<link rel="stylesheet" type="text/css" href="/css/sm.css" media="screen" />
    <link rel="alternate" type="application/rss+xml" title="Michal Franc | Feed" href="http://feeds.feedburner.com/PassionateProgram">

    <meta property="og:locale" content="en_US">
    <meta property="og:title" content="From procedural to functional - an example in F# | Michal Franc">
    <meta property="og:description" content="In this blog post, I show little code review of a code sent to me by friend. The code is quite simple example on how to read XML file using XmlProvider. My f...">
	<meta property="og:url" content="http://www.mfranc.com/uncategorized/from-procedural-to-functional-an-example-in-f/">
    <meta property="og:site_name" content="Michal Franc Blog">
    <meta property="og:type" content="website">
	<meta property="og:image" content="http://michal-franc.github.io/images/default_share_image.jpg">

	<meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="From procedural to functional - an example in F# | Michal Franc">
    <meta name="twitter:site" content="@francmichal">
    <meta name="twitter:creator" content="@francmichal">
    <meta name="twitter:description" content="In this blog post, I show little code review of a code sent to me by friend. The code is quite simple example on how to read XML file using XmlProvider. My f...">
	<meta name="twitter:image" content="http://michal-franc.github.io/images/default_share_image.jpg">

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-15894596-3', 'auto');
  ga('send', 'pageview');
</script>

    <script src="//static.getclicky.com/js" type="text/javascript"></script>
<script type="text/javascript">try{ clicky.init(100563098); }catch(e){}</script>
<noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/100563098ns.gif" /></p></noscript>

    <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

    <!-- Facebook Pixel Code -->
<script>
!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
document,'script','https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '1817837425153843'); // Insert your pixel ID here.
fbq('track', 'PageView');
</script>
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=1817837425153843&ev=PageView&noscript=1"
/></noscript>
<!-- DO NOT MODIFY -->
<!-- End Facebook Pixel Code -->


  </head>


  <body>
    <main>
      <header class="site-header">
  <div class="container">
	  <h1><a href="/">Michal<span>Franc</span></a></h1>

    <button type="button" class="sliding-panel-button">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <nav class="navbar sliding-panel-content">
      <ul>
        
          <li><a href="/blog" title="Posts">Posts</a></li>
        
          <li><a href="/notes" title="Notes">Notes</a></li>
        
          <li><a href="/articles" title="Articles">Articles</a></li>
        
          <li><a href="/about" title="About">About</a></li>
        
        <li><a href="/feed.xml" target="_blank"><i class="icon icon-feed"></i></a></li>
      </ul>
    </nav>
  </div>
</header>

<div class="sliding-panel-fade-screen"></div>


      <div class="container">
        <article role="article" class="post">

  <div class="card">
    <header class="post-header">
      <h1 class="post-title">From procedural to functional - an example in F#</h1>
      <p class="post-meta">Jul 13, 2015 • Michal Franc - 
		<small>
			<i class="icon icon-comments"></i><span class="disqus-comment-count" data-disqus-url="http://mfranc.com/uncategorized/from-procedural-to-functional-an-example-in-f/"></span>
		</small>
		<small>
			
			<a class="tag-badge" href="/blog/tags/#f#">f#</a>
			
		</small>
	  </p>
    </header>

	<center>
		
	</center>

    <div class="post-content">
      
      <p>In this blog post, I show little code review of a code sent to me by friend. The code is quite simple example on how to read XML file using XmlProvider. My friend’s biggest concern was that his code is still procedural and not ‘functional’. I was asked if this code can be refactored to be more functional, whatever it means.</p>

<p>First of all, the code that I got, is fine and most importantly it works. Even when you are using F# to solve your problems, you don’t really have to make your code super functional. That’s the beauty of this language. You can still use state-full and mutable approach to implement solution. You don’t have to make this code functional just for the sake of it.</p>

<p>Said that, I will still try to make the code better and in some ways more ‘functional’ to show some awesome F# features and approaches that do make the difference. My main goal here is to to remove loops and mutability.</p>

<p>XML structure</p>

<figure class="highlight">
  <pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;catalog</span> <span class="na">name=</span><span class="s">"TERC"</span> <span class="na">type=</span><span class="s">"all"</span> <span class="na">date=</span><span class="s">"2015-01-01"</span><span class="nt">&gt;</span>
 <span class="nt">&lt;row&gt;</span>
   <span class="nt">&lt;col</span> <span class="na">name=</span><span class="s">"WOJ"</span><span class="nt">&gt;</span>02<span class="nt">&lt;/col&gt;</span>
   <span class="nt">&lt;col</span> <span class="na">name=</span><span class="s">"POW"</span><span class="nt">/&gt;</span>
   <span class="nt">&lt;col</span> <span class="na">name=</span><span class="s">"GMI"</span><span class="nt">/&gt;</span>
   <span class="nt">&lt;col</span> <span class="na">name=</span><span class="s">"RODZ"</span><span class="nt">/&gt;</span>
   <span class="nt">&lt;col</span> <span class="na">name=</span><span class="s">"NAZWA"</span><span class="nt">&gt;</span>DOLNOsLaSKIE<span class="nt">&lt;/col&gt;</span>
   <span class="nt">&lt;col</span> <span class="na">name=</span><span class="s">"NAZDOD"</span><span class="nt">&gt;</span>województwo<span class="nt">&lt;/col&gt;</span>
   <span class="nt">&lt;col</span> <span class="na">name=</span><span class="s">"STAN_NA"</span><span class="nt">&gt;</span>2015-01-01<span class="nt">&lt;col&gt;</span>
 <span class="nt">&lt;/row&gt;</span>
...</code></pre>
</figure>

<p>The XML is a representing a Collection of ‘rows’ with parameters specified as ‘cols’. Each ‘Col’ has a param name and value. Some of the params are missing value.</p>

<p>Original Code</p>

<figure class="highlight">
  <pre><code class="language-csharp" data-lang="csharp"><span class="n">open</span> <span class="n">FSharp</span><span class="p">.</span><span class="n">Data</span>
<span class="n">open</span> <span class="n">System</span>

<span class="n">type</span> <span class="n">Record</span> <span class="p">=</span> <span class="p">{</span>
               <span class="n">voivoship</span> <span class="p">:</span> <span class="n">Option</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;;</span>
               <span class="n">district</span> <span class="p">:</span> <span class="n">Option</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;;</span>
               <span class="n">community</span><span class="p">:</span><span class="n">Option</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;;</span>
               <span class="n">rozd</span><span class="p">:</span><span class="n">Option</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;;</span>
               <span class="n">name</span><span class="p">:</span> <span class="n">Option</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;;</span>
               <span class="n">addinf</span><span class="p">:</span> <span class="n">Option</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> 
              <span class="p">}</span>

<span class="n">type</span> <span class="n">InputXml</span> <span class="p">=</span> <span class="n">XmlProvider</span><span class="p">&lt;</span><span class="s">"Terc.xml"</span><span class="p">&gt;</span>
<span class="k">let</span> <span class="n">tercs</span> <span class="p">=</span> <span class="n">InputXml</span><span class="p">.</span><span class="nf">GetSample</span><span class="p">()</span>

<span class="k">let</span> <span class="n">records</span> <span class="p">=</span>
    <span class="n">seq</span> <span class="p">{</span>

        <span class="k">for</span> <span class="n">row</span> <span class="k">in</span> <span class="n">tercs</span><span class="p">.</span><span class="n">Catalog</span><span class="p">.</span><span class="n">Rows</span> <span class="k">do</span>          

            <span class="k">let</span>  <span class="n">vs</span> <span class="p">=</span> <span class="k">ref</span> <span class="n">None</span>
            <span class="k">let</span>  <span class="n">dt</span> <span class="p">=</span> <span class="k">ref</span> <span class="n">None</span>
            <span class="k">let</span>  <span class="n">cy</span> <span class="p">=</span> <span class="k">ref</span> <span class="n">None</span>
            <span class="k">let</span>  <span class="n">rd</span> <span class="p">=</span> <span class="k">ref</span> <span class="n">None</span>
            <span class="k">let</span>  <span class="n">ne</span> <span class="p">=</span> <span class="k">ref</span> <span class="n">None</span>
            <span class="k">let</span>  <span class="n">af</span> <span class="p">=</span> <span class="k">ref</span> <span class="n">None</span>          

            <span class="k">for</span> <span class="n">col</span> <span class="k">in</span> <span class="n">row</span><span class="p">.</span><span class="n">Cols</span> <span class="k">do</span>
                <span class="n">match</span> <span class="n">col</span><span class="p">.</span><span class="n">Name</span> <span class="n">with</span>
                <span class="p">|</span> <span class="s">"WOJ"</span> <span class="p">-&gt;</span> <span class="n">vs</span> <span class="p">:=</span> <span class="n">col</span><span class="p">.</span><span class="n">Number</span>
                <span class="p">|</span> <span class="s">"POW"</span> <span class="p">-&gt;</span> <span class="n">dt</span> <span class="p">:=</span> <span class="n">col</span><span class="p">.</span><span class="n">Number</span>
                <span class="p">|</span> <span class="s">"GMI"</span> <span class="p">-&gt;</span> <span class="n">cy</span> <span class="p">:=</span>  <span class="n">col</span><span class="p">.</span><span class="n">Number</span>
                <span class="p">|</span> <span class="s">"RODZ"</span> <span class="p">-&gt;</span> <span class="n">rd</span> <span class="p">:=</span>  <span class="n">col</span><span class="p">.</span><span class="n">Number</span>
                <span class="p">|</span> <span class="s">"NAZWA"</span> <span class="p">-&gt;</span> <span class="n">ne</span> <span class="p">:=</span> <span class="n">col</span><span class="p">.</span><span class="n">String</span>
                <span class="p">|</span> <span class="s">"NAZDOD"</span> <span class="p">-&gt;</span> <span class="n">af</span> <span class="p">:=</span>  <span class="n">col</span><span class="p">.</span><span class="n">String</span>
                <span class="p">|</span> <span class="n">_</span> <span class="p">-&gt;</span> <span class="p">()</span>

            <span class="k">yield</span> <span class="p">{</span>
                    <span class="n">Record</span><span class="p">.</span><span class="n">voivoship</span> <span class="p">=</span> <span class="p">!</span><span class="n">vs</span><span class="p">;</span>
                    <span class="n">Record</span><span class="p">.</span><span class="n">district</span> <span class="p">=</span> <span class="p">!</span><span class="n">dt</span><span class="p">;</span>
                    <span class="n">Record</span><span class="p">.</span><span class="n">community</span> <span class="p">=</span> <span class="p">!</span><span class="n">cy</span><span class="p">;</span>
                    <span class="n">Record</span><span class="p">.</span><span class="n">rozd</span> <span class="p">=</span> <span class="p">!</span><span class="n">rd</span><span class="p">;</span>
                    <span class="n">Record</span><span class="p">.</span><span class="n">name</span> <span class="p">=</span> <span class="p">!</span><span class="n">ne</span><span class="p">;</span>
                    <span class="n">Record</span><span class="p">.</span><span class="n">addinf</span> <span class="p">=</span> <span class="p">!</span><span class="n">af</span>
                  <span class="p">}</span>
         <span class="p">}</span></code></pre>
</figure>

<ul>
	<li>Record type defined with all the values as options. Column values are optional thus all the properties are declared as options. This allows the usage of 'None' value.</li>
	<li>The data is being read using <a href="http://fsharp.github.io/FSharp.Data/">FSharp.Data</a> and XmlProvider</li>
	<li>Collection of records is created by using <a href="https://msdn.microsoft.com/en-us/library/dd233209.aspx">Sequence</a> and yield operator.</li>
	<li>The core mapping code from XML to record is in the loop.</li>
	<li>By default all the values, that hold col value, are set to None and then if one of them exists we do set the proper value</li>
	<li>I am not sure why 'ref' has been used here. It can be changed to just mutable 'let binding'. <a href="https://lorgonblog.wordpress.com/2008/11/09/the-f-ref-type/">More on ref</a></li>
	<li>Because 'ref' is used, there has to be '!' used to get the data. Thus this weird syntax of '!cy' to extract the value from 'ref'.</li>
</ul>
<p>So where to start with some changes ?</p>
<h3>With operator and stateless record change</h3>
<p>I start with a simple, yet a nice change, that makes the code cleaner.</p>

<p>Instead of extracting all the values and then creating a record instance at the end, I use ‘with’ operator and compose the Record on the fly.</p>

<p>In order to do this, I need to define a function to create a default record type with all the values set to ‘None’ ( option type ). Thanks to this, I can remove ref’ and weird initialization of temp values.</p>

<figure class="highlight">
  <pre><code class="language-csharp" data-lang="csharp"><span class="k">let</span> <span class="n">createRecord</span> <span class="p">=</span>
        <span class="p">{</span>
            <span class="n">voivoship</span> <span class="p">=</span> <span class="n">None</span>
            <span class="n">district</span> <span class="p">=</span> <span class="n">None</span>
            <span class="n">community</span> <span class="p">=</span> <span class="n">None</span>
            <span class="n">rozd</span> <span class="p">=</span> <span class="n">None</span>
            <span class="n">name</span> <span class="p">=</span> <span class="n">None</span>
            <span class="n">addinf</span> <span class="p">=</span> <span class="n">None</span>
        <span class="p">}</span></code></pre>
</figure>

<p>Then, I introduce a function that maps the ‘col’ and its value to proper field in the Record</p>

<figure class="highlight">
  <pre><code class="language-csharp" data-lang="csharp"><span class="k">let</span> <span class="n">addCol</span> <span class="n">name</span> <span class="n">number</span> <span class="kt">string</span> <span class="n">record</span> <span class="p">=</span> <span class="kt">string</span> <span class="p">-&gt;</span> <span class="kt">int</span> <span class="p">-&gt;</span> <span class="kt">string</span> <span class="p">-&gt;</span> <span class="n">Record</span> <span class="p">-&gt;</span> <span class="n">Record</span></code></pre>
</figure>

<p>This function takes a name of the ‘col’ ( parameter ) , a number or a string and the existing record. The with operator creates a new Record based on existing one with specified field added to it.</p>

<figure class="highlight">
  <pre><code class="language-csharp" data-lang="csharp"><span class="k">let</span> <span class="n">addCol</span> <span class="n">name</span> <span class="n">number</span> <span class="kt">string</span> <span class="n">record</span> <span class="p">=</span>
        <span class="n">match</span> <span class="n">name</span> <span class="n">with</span>
        <span class="p">|</span> <span class="s">"WOJ"</span> <span class="p">-&gt;</span> <span class="p">{</span> <span class="n">record</span> <span class="n">with</span> <span class="n">voivoship</span> <span class="p">=</span> <span class="n">number</span> <span class="p">}</span>
        <span class="p">|</span> <span class="s">"POW"</span> <span class="p">-&gt;</span> <span class="p">{</span> <span class="n">record</span> <span class="n">with</span> <span class="n">district</span> <span class="p">=</span> <span class="n">number</span> <span class="p">}</span>
        <span class="p">|</span> <span class="s">"GMI"</span> <span class="p">-&gt;</span> <span class="p">{</span> <span class="n">record</span> <span class="n">with</span> <span class="n">community</span> <span class="p">=</span> <span class="n">number</span> <span class="p">}</span>
        <span class="p">|</span> <span class="s">"RODZ"</span> <span class="p">-&gt;</span> <span class="p">{</span> <span class="n">record</span> <span class="n">with</span> <span class="n">rozd</span> <span class="p">=</span> <span class="n">number</span> <span class="p">}</span>
        <span class="p">|</span> <span class="s">"NAZWA"</span> <span class="p">-&gt;</span> <span class="p">{</span> <span class="n">record</span> <span class="n">with</span> <span class="n">name</span> <span class="p">=</span> <span class="kt">string</span> <span class="p">}</span>
        <span class="p">|</span> <span class="s">"NAZDOD"</span> <span class="p">-&gt;</span>  <span class="p">{</span> <span class="n">record</span> <span class="n">with</span> <span class="n">addinf</span> <span class="p">=</span> <span class="kt">string</span> <span class="p">}</span>
        <span class="p">|</span> <span class="n">_</span> <span class="p">-&gt;</span> <span class="n">record</span></code></pre>
</figure>

<p>Now, I can write code like this.</p>

<figure class="highlight">
  <pre><code class="language-csharp" data-lang="csharp"><span class="k">let</span> <span class="n">newRecord</span> <span class="p">=</span> <span class="n">createRecord</span>
<span class="k">let</span> <span class="n">recordWithNewValue</span> <span class="p">=</span> <span class="n">addCol</span> <span class="s">"WOJ"</span> <span class="m">1</span> <span class="n">None</span> <span class="n">newRecord</span></code></pre>
</figure>

<p>This code creates newRecord and then adds voivoship value to it. All the existing fields are still set to ‘None’.</p>
<h3>From loop to recursion</h3>
<p>In the original code there is a loop used to change the state of the object. This is a perfect approach in procedural statefull approach. You just add new fields to the object. However when, stateless approach is needed, loop won’t fit it due to its dependence on external state change. Loop doesn’t return anything and it can only change existing state out of its scope. If you want to change something in the loop it has to be mutable.</p>

<p>If you want to loop some collection and change something without mutable value then you might use recursion. The good thing about it is that recursion is a function that has to return something and you can return new state. There is no need for mutable values.</p>

<p>To change the loop from original code to recursion, I need to define a recursive function.</p>

<figure class="highlight">
  <pre><code class="language-csharp" data-lang="csharp"><span class="k">let</span> <span class="n">rec</span> <span class="n">iterateCols</span> <span class="nf">record</span> <span class="p">(</span><span class="n">cols</span><span class="p">:</span><span class="n">List</span><span class="p">&lt;</span><span class="n">InputXml</span><span class="p">.</span><span class="n">Col</span><span class="p">&gt;)</span> <span class="p">=</span>
	<span class="n">match</span> <span class="n">cols</span> <span class="n">with</span>
		<span class="p">|</span> <span class="n">head</span><span class="p">::</span><span class="n">tail</span> <span class="p">-&gt;</span> <span class="nf">iterateCols</span> <span class="p">(</span><span class="n">addCol</span> <span class="n">head</span><span class="p">.</span><span class="n">Name</span> <span class="n">head</span><span class="p">.</span><span class="n">Number</span> <span class="n">head</span><span class="p">.</span><span class="n">String</span> <span class="n">record</span><span class="p">)</span> <span class="n">tail</span>
		<span class="p">|</span> <span class="p">[]</span> <span class="p">-&gt;</span> <span class="n">record</span></code></pre>
</figure>

<ul>
	<li>rec means that this function is recursive</li>
	<li>this function takes an existing record and list of columns</li>
	<li>it loops through the list of columns using match</li>
	<li>'head::tail' is a list deconstruction convention using <a href="http://hestia.typepad.com/flatlander/2010/07/f-pattern-matching-for-beginners-part-4-lists-and-recursion.html">cons operator</a> - 'head' will be the first element while 'tail' is the rest of the collection</li>
	<li>to do recursive call, I invoke the same function passing record created by addCol function ( introduced earlier in the post ) and rest of the collection ( 'tail' )</li>
	<li>if the list is empty i return the record</li>
	<li>this is a very common pattern in functional programming</li>
</ul>
<p>To bind everything together, there is a function that initiates the recursion</p>

<figure class="highlight">
  <pre><code class="language-csharp" data-lang="csharp"><span class="k">let</span> <span class="n">createRecordBasedOnRow</span> <span class="n">cols</span> <span class="p">=</span>
	<span class="k">let</span> <span class="n">rec</span> <span class="n">iterateCols</span> <span class="nf">record</span> <span class="p">(</span><span class="n">cols</span><span class="p">:</span><span class="n">List</span><span class="p">&lt;</span><span class="n">InputXml</span><span class="p">.</span><span class="n">Col</span><span class="p">&gt;)</span> <span class="p">=</span>
		<span class="n">match</span> <span class="n">cols</span> <span class="n">with</span>
			<span class="p">|</span> <span class="n">head</span><span class="p">::</span><span class="n">tail</span> <span class="p">-&gt;</span> <span class="nf">iterateCols</span> <span class="p">(</span><span class="n">addCol</span> <span class="n">head</span><span class="p">.</span><span class="n">Name</span> <span class="n">head</span><span class="p">.</span><span class="n">Number</span> <span class="n">head</span><span class="p">.</span><span class="n">String</span> <span class="n">record</span><span class="p">)</span> <span class="n">tail</span>
			<span class="p">|</span> <span class="p">[]</span> <span class="p">-&gt;</span> <span class="n">record</span>
	<span class="n">iterateCols</span> <span class="n">createRecord</span> <span class="n">cols</span></code></pre>
</figure>

<ul>
	<li>I do declare a function iterateCols/li&gt;
	<li>and then invoke it with initial parameters ( an empty record ) and ( list of columns )</li>
&lt;/ul&gt;
Sequence now returns a collection of Rows with values from Columns


<figure class="highlight"><pre><code class="language-csharp" data-lang="csharp"><span class="k">let</span> <span class="n">records</span> <span class="p">=</span>
	<span class="n">seq</span> <span class="p">{</span>
		<span class="k">for</span> <span class="n">row</span> <span class="k">in</span> <span class="n">tercs</span><span class="p">.</span><span class="n">Rows</span> <span class="k">do</span>      
			<span class="k">yield</span> <span class="p">(</span><span class="nf">createRecordBasedOnRow</span> <span class="p">(</span><span class="n">row</span><span class="p">.</span><span class="n">Cols</span> <span class="p">|&gt;</span> <span class="n">Array</span><span class="p">.</span><span class="n">toList</span><span class="p">))</span>
		<span class="p">}</span></code></pre></figure>


That's all. <a href="http://pastebin.com/yEJAMzDH ">Full code is available here.</a>
<h3>Recursion vs Loop</h3>
When you look at the original code and new code, it might look less readable. I do find recursion more readable now, but I got used to it. Normal for loop might be more readable in some cases and you have to always ask a questions like.
<ul>
	<li>Do, I need stateless code in here ?</li>
	<li> What are the benefits of making this code more 'pure-functional'</li>
</ul>
Like everything in our field, there is no silver bullet and we have to be pragmatic.

Feel free to leave a comments with your opinions about this code. I would love to hear more suggestion and ideas on how to approach problems like this.
</li></ul>

      <span id="post-end"></span>
    </div>

    <div id="mc_embed_signup">
<form action="https://mfranc.us13.list-manage.com/subscribe/post?u=8a5865e28c59044d419ecbe95&amp;id=d545f31150" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
      <label for="mce-EMAIL">If you are interested in Cloud Native, Scalability, System Design and more meaty side of Engineering at Scale. Then subscribe to my mailing list.</label>
      <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
        <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_8a5865e28c59044d419ecbe95_d545f31150" tabindex="-1" value=""></div>
        <div class="clear">
          <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button">
        </div>
    </div>
</form>
</div>



    
<hr>

<aside id="comments" class="disqus">
  <div class="container">
    <h3><i class="icon icon-comments-o"></i> Comments</h3>
    <div id="disqus_thread"></div>
    <script>
      (function() {
        var d = document,
        s = d.createElement('script');
        s.src = '//thesilenceofthelams.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  </div>
</aside>



  </div>

</article>

      </div>


      <footer class="site-footer">
  <div class="container">
    <ul class="social">
  <li><a href="http://github.com/michal-franc" target="_blank"><i class="icon icon-github"></i></a></li>
  <li><a href="http://twitter.com/francmichal" target="_blank"><i class="icon icon-twitter"></i></a></li>
  <li><a href="http://facebook.com/michalfrancblog" target="_blank"><i class="icon icon-facebook"></i></a></li>
  <li><a href="https://uk.linkedin.com/in/michalfranc1" target="_blank"><i class="icon icon-linkedin"></i></a></li>
</ul>

    <p class="txt-medium-gray">
      <small>&copy;2018 All rights reserved. Made with <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> and ♥</small>
    </p>
  </div>
</footer>


      <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
	  <script type="text/javascript" src="/js/jquery.slick-modals.js"/></script>

	  <!-- <script id="ulp-remote" src="http://tools.mfranc.com/wp-content/plugins/layered-popups/js/remote.min.js?ver=5.89" data-handler="http://tools.mfranc.com/wp-admin/admin-ajax.php"></script>
	  <script>

		    (function ($) {
			"use strict";
			var objectPositionTop = $('#post-end').offset().top - window.innerHeight;

				ulp_add_event("onexit", {
					popup:		"4AXWiVSrZD71uqiP",
					mode:		"once-period",
					period:		30
				});

				ulp_add_event("onidle", {
					popup:		"85oltSbndJGZQzaW",
					mode:		"once-period",
					period:         30
				});

				ulp_add_event("onscroll", {
					popup:		"INyhHrwTzxjvcqEb",
					mode:		"once-period",
					period:         30,
					offset:		objectPositionTop / 2
				});

		    }(jQuery));

    </script> -->

		<script id="dsq-count-scr" src="//thesilenceofthelams.disqus.com/count.js" async></script>

		<div id="fb-root"></div>
		<script>(function(d, s, id) {
		  var js, fjs = d.getElementsByTagName(s)[0];
		  if (d.getElementById(id)) return;
		  js = d.createElement(s); js.id = id;
		  js.src = "//connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v2.7&appId=125980610784627";
		  fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'facebook-jssdk'));</script>
    </main>
  </body>
</html>
