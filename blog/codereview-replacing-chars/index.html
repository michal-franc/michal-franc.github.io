<!DOCTYPE html>
<html>
    <head>

    
    <meta name="robots" content="all">
    

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="author" content="Michal Franc">
    <meta name="keywords" content="michal franc,leader,programmer,coach,speaker">
	<title>Codereview – Replacing chars | Michal Franc</title>
	<meta name="description" content="One of my friends asked me for help with his code. He had a simple error with IndexOutOfBound exception, it was quite simple but I had other suggestion to hi...">

    <link href="https://fonts.googleapis.com/css?family=Inconsolata:700|Raleway" rel="stylesheet">
    <link rel="profile" href="http://gmpg.org/xfn/11">
    <link rel="author" href="https://plus.google.com/104238159697387202725?rel=author">

	<link rel="canonical" href="http://www.mfranc.com/blog/codereview-replacing-chars/">

    <link rel="stylesheet" href="/css/main.css">
	<link rel="stylesheet" type="text/css" href="/css/sm.css" media="screen" />
    <link rel="alternate" type="application/rss+xml" title="Michal Franc | Feed" href="http://feeds.feedburner.com/PassionateProgram">

    <meta property="og:locale" content="en_US">
    <meta property="og:title" content="Codereview – Replacing chars | Michal Franc">
    <meta property="og:description" content="One of my friends asked me for help with his code. He had a simple error with IndexOutOfBound exception, it was quite simple but I had other suggestion to hi...">
	<meta property="og:url" content="http://www.mfranc.com/blog/codereview-replacing-chars/">
    <meta property="og:site_name" content="Michal Franc Blog">
    <meta property="og:type" content="website">
	<meta property="og:image" content="http://michal-franc.github.io/images/default_share_image.jpg">

	<meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Codereview – Replacing chars | Michal Franc">
    <meta name="twitter:site" content="@francmichal">
    <meta name="twitter:creator" content="@francmichal">
    <meta name="twitter:description" content="One of my friends asked me for help with his code. He had a simple error with IndexOutOfBound exception, it was quite simple but I had other suggestion to hi...">
	<meta name="twitter:image" content="http://michal-franc.github.io/images/default_share_image.jpg">

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-15894596-3', 'auto');
  ga('send', 'pageview');
</script>

    <script src="//static.getclicky.com/js" type="text/javascript"></script>
<script type="text/javascript">try{ clicky.init(100563098); }catch(e){}</script>
<noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/100563098ns.gif" /></p></noscript>

    <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

    <!-- Facebook Pixel Code -->
<script>
!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
document,'script','https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '1817837425153843'); // Insert your pixel ID here.
fbq('track', 'PageView');
</script>
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=1817837425153843&ev=PageView&noscript=1"
/></noscript>
<!-- DO NOT MODIFY -->
<!-- End Facebook Pixel Code -->


  </head>


  <body>
    <main>
      <header class="site-header">
  <div class="container">
	  <h1><a href="/">Michal<span>Franc</span></a></h1>

    <button type="button" class="sliding-panel-button">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <nav class="navbar sliding-panel-content">
      <ul>
        
          <li><a href="/blog" title="Posts">Posts</a></li>
        
          <li><a href="/notes" title="Notes">Notes</a></li>
        
          <li><a href="/articles" title="Articles">Articles</a></li>
        
          <li><a href="/about" title="About">About</a></li>
        
        <li><a href="/feed.xml" target="_blank"><i class="icon icon-feed"></i></a></li>
      </ul>
    </nav>
  </div>
</header>

<div class="sliding-panel-fade-screen"></div>


      <div class="container">
        <article role="article" class="post">

  <div class="card">
    <header class="post-header">
      <h1 class="post-title">Codereview – Replacing chars</h1>
      <p class="post-meta">Jun 17, 2012 • Michal Franc - 
		<small>
			<i class="icon icon-comments"></i><span class="disqus-comment-count" data-disqus-url="http://mfranc.com/blog/codereview-replacing-chars/"></span>
		</small>
		<small>
			
			<a class="tag-badge" href="/blog/tags/#codereview">codereview</a>
			
		</small>
	  </p>
    </header>

	<center>
		
	</center>

    <div class="post-content">
      
      <p align="justify">One of my friends asked me for help with his code. He had a simple error with <strong>IndexOutOfBound </strong>exception, it was quite simple but I had other suggestion to his code.  Hopefully this post will help other <strong>“starting”</strong> programmers by providing good tips and some ideas relating the code and refactorization.</p>
<h2 align="justify">Initial Code</h2>
<p align="justify"><a href="http://www.mfranc.com/wp-content/uploads/2012/06/image.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top-width: 0px; border-bottom-width: 0px; margin-left: auto; border-left-width: 0px; margin-right: auto; padding-top: 0px" title="image" border="0" alt="image" src="http://www.mfranc.com/wp-content/uploads/2012/06/image_thumb.png" width="505" height="382" /></a></p>
<p align="justify">Here is the code. This method takes <strong>string</strong> as a parameter and returns another <strong>string</strong>. It is not obvious but this function is supposed to change Polish characters to other chars in order to clean up provided parameter.</p>
<h5 align="justify">Simple Example</h5>
<p align="justify">For input <strong>“żenił Jak może budować”</strong> this function should return<strong> “zenil Jak moze budowac”</strong></p>
<p align="justify">As you can see we get rid of <strong>“ż ć ł”.</strong></p>
<h5 align="justify">Error</h5>
<p align="justify">There is a very simple error inside this code that gives <strong>IndexOutOfBound Exception</strong> for some cases. Code works when lengths of strings in <strong>array</strong> , <strong>array2</strong> and parameter string <strong>“str”</strong> are the same. It is clearly a problem linked with two <strong>for loops</strong> and their stop conditions.</p>
<h2 align="justify">Fix in the Code</h2>
<h2 align="justify"><a href="http://www.mfranc.com/wp-content/uploads/2012/06/image1.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top-width: 0px; border-bottom-width: 0px; margin-left: auto; border-left-width: 0px; margin-right: auto; padding-top: 0px" title="image" border="0" alt="image" src="http://www.mfranc.com/wp-content/uploads/2012/06/image_thumb1.png" width="495" height="401" /></a></h2>
<p align="justify">Fix is simple and involves changes to the stop conditions inside loops. Outer loops should be dependent on length from array being changed. Inner loops is iterating through elements inside arrays that are defining char – replacer relationship.  </p>
<p align="justify">After those fixes function works fine and does the required job.</p>
<h2 align="justify">Refactorization</h2>
<p align="justify">After fixing the bug let’s talk about quality of the code, conventions and refactorization. </p>
<p align="justify">First of all I don’t like the name of the function - <strong>“replace_pl” </strong>, this one doesn’t fit into standard <strong>camel case </strong>convention in <strong>.Net, a</strong>lso this name gives us little information about purpose of the function. Only clear message is that it replaces something, we don’t know what kind of thing. I changed the name to <strong>ReplacePolishChars, </strong>a lot better and quite descriptive.</p>
<p align="justify">Then I changed the parameter name and name of the object that will be returned to <strong>”inputString”</strong> and <strong>“outputString”</strong> . With names containing  <strong>input</strong> and <strong>output, </strong>I can easily track variables that are visible to the user of the method.</p>
<p align="justify">Internal variables <strong>array</strong> and <strong>array2,</strong> that’s also a bad idea. From their names we don’t know what’s their usage and purpose. We need to analyze code in order to get the general idea what are they. I changed their names to <strong>“polishChars” </strong>and<strong> “replacers”</strong> now we know  (I don’t like the idea of two strings here but I will get back to this later ) .</p>
<p align="justify"> </p>
<p align="justify"><a href="http://www.mfranc.com/wp-content/uploads/2012/06/image2.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top-width: 0px; border-bottom-width: 0px; margin-left: auto; border-left-width: 0px; margin-right: auto; padding-top: 0px" title="image" border="0" alt="image" src="http://www.mfranc.com/wp-content/uploads/2012/06/image_thumb2.png" width="514" height="359" /></a></p>
<p align="justify"></p>
<p align="justify"> </p>
<p align="justify">This code can be refactored further. Instead of <strong>“==” </strong>operator we could use <strong>.Equals</strong> or <strong>Compare. For</strong> loops could be replaced with <strong>enumarator</strong> and <strong>foreach.</strong></p>
<h2 align="justify">Better Approach</h2>
<p align="justify">I mentioned earlier that I don’t like the idea with two <strong>strings</strong> containing data about chars being replaced and their replacers. With string you have to remember correct order, little change can cause painful and  <strong>“hidden” </strong>bugs. It is also hard to track which pair of <strong>char </strong>and its <strong>replacer</strong>.</p>
<p align="justify">It is better to use <strong>Dictionary</strong> with key equal to char being replaced and value equal to his replacer. With this solution we can delete one for loop and just check for each char in <strong>“inputString”</strong> if there is a key for it, and if it is just replace current char with value from the <strong>Dictionary</strong>.</p>
<p align="justify"> </p>
<p align="justify"><a href="http://www.mfranc.com/wp-content/uploads/2012/06/image3.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top-width: 0px; border-bottom-width: 0px; margin-left: auto; border-left-width: 0px; margin-right: auto; padding-top: 0px" title="image" border="0" alt="image" src="http://www.mfranc.com/wp-content/uploads/2012/06/image_thumb3.png" width="510" height="413" /></a></p>
<p align="justify"></p>
<p align="justify"></p>
<p align="justify"></p>
<p align="justify"> </p>
<p align="justify">With dictionary we can easily add new chars to be replaced, also it is a lot easier to track which char is replacing another one <img style="border-bottom-style: none; border-left-style: none; border-top-style: none; border-right-style: none" class="wlEmoticon wlEmoticon-winkingsmile" alt="Winking smile" src="http://www.mfranc.com/wp-content/uploads/2012/06/wlEmoticon-winkingsmile.png" /></p>
<h2 align="justify">Conclusion</h2>
<p align="justify">Remember about the standards and conventions. Name your methods and variables accordingly retain nice descriptive style without using the comments. Commenting should be only used in special cases.  Try to find different approaches and it is always good idea to <strong>code review </strong>your creations . Fresh pair of eyes is always helpful.</p>

      <span id="post-end"></span>
    </div>

    <div id="mc_embed_signup">
<form action="https://mfranc.us13.list-manage.com/subscribe/post?u=8a5865e28c59044d419ecbe95&amp;id=d545f31150" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
      <label for="mce-EMAIL">If you are interested in Cloud Native, Scalability, System Design and more meaty side of Engineering at Scale. Then subscribe to my mailing list.</label>
      <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
        <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_8a5865e28c59044d419ecbe95_d545f31150" tabindex="-1" value=""></div>
        <div class="clear">
          <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button">
        </div>
    </div>
</form>
</div>



    
<hr>

<aside id="comments" class="disqus">
  <div class="container">
    <h3><i class="icon icon-comments-o"></i> Comments</h3>
    <div id="disqus_thread"></div>
    <script>
      (function() {
        var d = document,
        s = d.createElement('script');
        s.src = '//thesilenceofthelams.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  </div>
</aside>



  </div>

</article>

      </div>


      <footer class="site-footer">
  <div class="container">
    <ul class="social">
  <li><a href="http://github.com/michal-franc" target="_blank"><i class="icon icon-github"></i></a></li>
  <li><a href="http://twitter.com/francmichal" target="_blank"><i class="icon icon-twitter"></i></a></li>
  <li><a href="http://facebook.com/michalfrancblog" target="_blank"><i class="icon icon-facebook"></i></a></li>
  <li><a href="https://uk.linkedin.com/in/michalfranc1" target="_blank"><i class="icon icon-linkedin"></i></a></li>
</ul>

    <p class="txt-medium-gray">
      <small>&copy;2018 All rights reserved. Made with <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> and ♥</small>
    </p>
  </div>
</footer>


      <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
	  <script type="text/javascript" src="/js/jquery.slick-modals.js"/></script>

	  <!-- <script id="ulp-remote" src="http://tools.mfranc.com/wp-content/plugins/layered-popups/js/remote.min.js?ver=5.89" data-handler="http://tools.mfranc.com/wp-admin/admin-ajax.php"></script>
	  <script>

		    (function ($) {
			"use strict";
			var objectPositionTop = $('#post-end').offset().top - window.innerHeight;

				ulp_add_event("onexit", {
					popup:		"4AXWiVSrZD71uqiP",
					mode:		"once-period",
					period:		30
				});

				ulp_add_event("onidle", {
					popup:		"85oltSbndJGZQzaW",
					mode:		"once-period",
					period:         30
				});

				ulp_add_event("onscroll", {
					popup:		"INyhHrwTzxjvcqEb",
					mode:		"once-period",
					period:         30,
					offset:		objectPositionTop / 2
				});

		    }(jQuery));

    </script> -->

		<script id="dsq-count-scr" src="//thesilenceofthelams.disqus.com/count.js" async></script>

		<div id="fb-root"></div>
		<script>(function(d, s, id) {
		  var js, fjs = d.getElementsByTagName(s)[0];
		  if (d.getElementById(id)) return;
		  js = d.createElement(s); js.id = id;
		  js.src = "//connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v2.7&appId=125980610784627";
		  fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'facebook-jssdk'));</script>
    </main>
  </body>
</html>
