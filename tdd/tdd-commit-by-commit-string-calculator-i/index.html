<!DOCTYPE html>
<html>
    <head>

    
    <meta name="robots" content="all">
    

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="author" content="Michal Franc">
    <meta name="keywords" content="michal franc,leader,programmer,coach,speaker">
	<title>TDD - commit by commit String Calculator (I) | Michal Franc</title>
	<meta name="description" content="In this series I want to share my approach to TDD. I will do a simple TDD kata, sharing with you all my decisions and thoughts. It’s called commit by commit ...">

    <link href="https://fonts.googleapis.com/css?family=Inconsolata:700|Raleway" rel="stylesheet">
    <link rel="profile" href="http://gmpg.org/xfn/11">
    <link rel="author" href="https://plus.google.com/104238159697387202725?rel=author">

	<link rel="canonical" href="http://www.mfranc.com/tdd/tdd-commit-by-commit-string-calculator-i/">

    <link rel="stylesheet" href="/css/main.css">
	<link rel="stylesheet" type="text/css" href="/css/sm.css" media="screen" />
    <link rel="alternate" type="application/rss+xml" title="Michal Franc | Feed" href="http://feeds.feedburner.com/PassionateProgram">

    <meta property="og:locale" content="en_US">
    <meta property="og:title" content="TDD - commit by commit String Calculator (I) | Michal Franc">
    <meta property="og:description" content="In this series I want to share my approach to TDD. I will do a simple TDD kata, sharing with you all my decisions and thoughts. It’s called commit by commit ...">
	<meta property="og:url" content="http://www.mfranc.com/tdd/tdd-commit-by-commit-string-calculator-i/">
    <meta property="og:site_name" content="Michal Franc Blog">
    <meta property="og:type" content="website">
	<meta property="og:image" content="http://michal-franc.github.io/images/default_share_image.jpg">

	<meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="TDD - commit by commit String Calculator (I) | Michal Franc">
    <meta name="twitter:site" content="@francmichal">
    <meta name="twitter:creator" content="@francmichal">
    <meta name="twitter:description" content="In this series I want to share my approach to TDD. I will do a simple TDD kata, sharing with you all my decisions and thoughts. It’s called commit by commit ...">
	<meta name="twitter:image" content="http://michal-franc.github.io/images/default_share_image.jpg">

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-15894596-3', 'auto');
  ga('send', 'pageview');
</script>

    <script src="//static.getclicky.com/js" type="text/javascript"></script>
<script type="text/javascript">try{ clicky.init(100563098); }catch(e){}</script>
<noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/100563098ns.gif" /></p></noscript>

    <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

    <!-- Facebook Pixel Code -->
<script>
!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
document,'script','https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '1817837425153843'); // Insert your pixel ID here.
fbq('track', 'PageView');
</script>
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=1817837425153843&ev=PageView&noscript=1"
/></noscript>
<!-- DO NOT MODIFY -->
<!-- End Facebook Pixel Code -->


  </head>


  <body>
    <main>
      <header class="site-header">
  <div class="container">
	  <h1><a href="/">Michal<span>Franc</span></a></h1>

    <button type="button" class="sliding-panel-button">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <nav class="navbar sliding-panel-content">
      <ul>
        
          <li><a href="/blog" title="Posts">Posts</a></li>
        
          <li><a href="/notes" title="Notes">Notes</a></li>
        
          <li><a href="/articles" title="Articles">Articles</a></li>
        
          <li><a href="/about" title="About">About</a></li>
        
        <li><a href="/feed.xml" target="_blank"><i class="icon icon-feed"></i></a></li>
      </ul>
    </nav>
  </div>
</header>

<div class="sliding-panel-fade-screen"></div>


      <div class="container">
        <article role="article" class="post">

  <div class="card">
    <header class="post-header">
      <h1 class="post-title">TDD - commit by commit String Calculator (I)</h1>
      <p class="post-meta">Mar 10, 2014 • Michal Franc - 
		<small>
			<i class="icon icon-comments"></i><span class="disqus-comment-count" data-disqus-url="http://mfranc.com/tdd/tdd-commit-by-commit-string-calculator-i/"></span>
		</small>
		<small>
			
			<a class="tag-badge" href="/blog/tags/#tdd">tdd</a>
			
		</small>
	  </p>
    </header>

	<center>
		
	</center>

    <div class="post-content">
      
      <p>In this series I want to share my approach to TDD. I will do a simple TDD kata, sharing with you all my decisions and thoughts. It’s called commit by commit beacuse you will find here links to github with each step. There will be a commentary to each one of these. I encourage you to comment and show me the flaws in my “style” of TDD coding. I also want to learn from you. I do know that my approach has its problems and there is allways a way to do something better.</p>

<h3>String Calculator Kata First Kata is quite simple. You can find all the details on the</h3>

<p><a href="http://osherove.com/tdd-kata-1/">Roy Oshevore’s site</a>. Just to be brief, I am going to implement string calculator that parses values from the string and sums all of them. For example for an input of “1,2,3” the end result will be “6”. This simple kata is a good problem, to present you the way I do approach the coding with TDD. If you don’t know the concept of “Coding Kata”, no worries, have fun reading this <a href="http://codekata.com/kata/codekata-how-it-started/">blog post by Dave Thomas</a> the guy who coined the term.</p>

<h4>Step I - Empty Project</h4>

<p>Let’s start simple with an empty project containing one test class. Yes test class with a default name Class1. Why Class1 ? Right now, I don’t want to decide on the naming of the class under test. Also just to start, first lines of code are going to be inside the Test Method. I am not creating class or method, just a code inside the Test Method. Thats one of the approaches, I’ve learned recently. Start as soon as possible with anything and check all the assumptions about the problem you are trying to solve. Don’t waste time over-thinking stuff not related to the problem at hand. I know that as engineers we do have a tendency to be mad about code quality from the start. But let’s forget about it for a while and this time do it differently ;) Approach like this is ok for not so overcomplicated and self-contained problems. With more complex stuf, I tend to think about design for a while before I write the code.</p>

<p><a href="http://codemanship.co.uk/parlezuml/blog/?postid=987">You can read more about classic and london school approach to TDD here.</a> Here is a <a href="https://github.com/michal-franc/BlogStuff/commit/32bef5ef7416bd337bf2cce9d20588be0639e1a8">link to the commit</a> with my first step. I will post links like this at the end of the steps.</p>

<h4>Step II - The most obvious string</h4>

<p>First requirement : for input string with numbers separated by ‘,’ return sum of these numbers. I approached TDD previously with tendency to start with tests for edge cases, null checks, exceptions. It is a very tempting approach. You can allways write something fast and make some easy “red/green/refactor happy” points. No, no, no. Start with a solution to The most basic requirement, that way you can check the requirements and the context of the problem before even touching edge cases.</p>

<p><a href="https://github.com/michal-franc/BlogStuff/commit/0ad433b022b131f056c67336881f15a71b314fb4">Simple solution to the first requirement.</a></p>

<figure class="highlight">
  <pre><code class="language-csharp" data-lang="csharp"><span class="na">[Test]</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">ICanParseString_AndSumUpValues</span><span class="p">()</span>
<span class="p">{</span>
   <span class="kt">var</span> <span class="n">input</span> <span class="p">=</span> <span class="s">"1,2,3,4,5"</span><span class="p">;</span>
   <span class="kt">var</span> <span class="n">expectedSum</span> <span class="p">=</span> <span class="m">15</span><span class="p">;</span>

   <span class="kt">var</span> <span class="n">values</span> <span class="p">=</span> <span class="n">input</span><span class="p">.</span><span class="nf">Split</span><span class="p">(</span><span class="sc">','</span><span class="p">);</span>

   <span class="kt">var</span> <span class="n">actualSum</span> <span class="p">=</span> <span class="n">values</span><span class="p">.</span><span class="nf">Select</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="kt">int</span><span class="p">.</span><span class="nf">Parse</span><span class="p">(</span><span class="n">x</span><span class="p">)).</span><span class="nf">Sum</span><span class="p">();</span>

   <span class="n">Assert</span><span class="p">.</span><span class="nf">That</span><span class="p">(</span><span class="n">actualSum</span><span class="p">,</span> <span class="n">Is</span><span class="p">.</span><span class="nf">EqualTo</span><span class="p">(</span><span class="n">expectedSum</span><span class="p">));</span>
<span class="p">}</span></code></pre>
</figure>

<p>The code uses Split method on string to get all the values. Values are then parsed and summed up. Beacuse, at this moment I don’t care about the edge cases, the “Parse” method is used instead of “TryParse”. This is just a start, a first step that will influence next steps. Right now I want to start as simple as possible and prove that solution like this works and I do have a meaningfull result.</p>

<h4>Step III - Introduce Class and Method</h4>

<p>With a simple solution that fullfills the first simple case. I can now create a class with a method.</p>

<p><a href="https://github.com/michal-franc/BlogStuff/commit/8341b36964b192214c246c3189cbc2ee0017b189">Commit</a></p>

<figure class="highlight">
  <pre><code class="language-csharp" data-lang="csharp"><span class="k">public</span> <span class="k">class</span> <span class="nc">StringCalculator</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="kt">object</span> <span class="nf">SumFromString</span><span class="p">(</span><span class="kt">string</span> <span class="n">input</span><span class="p">)</span>
    <span class="p">{</span>
       <span class="kt">var</span> <span class="n">values</span> <span class="p">=</span> <span class="n">input</span><span class="p">.</span><span class="nf">Split</span><span class="p">(</span><span class="sc">','</span><span class="p">);</span>
       <span class="k">return</span> <span class="n">values</span><span class="p">.</span><span class="nf">Select</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="kt">int</span><span class="p">.</span><span class="nf">Parse</span><span class="p">(</span><span class="n">x</span><span class="p">)).</span><span class="nf">Sum</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre>
</figure>

<p>This is a start. With class in place I can think of some simple edge cases.</p>

<h4>Step IV - Edge Cases</h4>

<p>The time has come for some edge cases. I can define at least two of these now: - What happens if input is empty or null ? - What to do when input is not formatted correctly ? How to check it ? Lets try to do the first one with empty, null, whitespace input scenario. What to do ? I can treat it as a wrong input throwing an exception ? or just return a zero value hiding the problem. Answer to this hard question is hidden inside the context around your problem. I have to ask a question, How is this code going to be used ? Who is going to call it ?. To keep things simple, I will stick with the return 0 option.</p>

<p><a href="https://github.com/michal-franc/BlogStuff/commit/c1c173a5c1a7aeb3c95f9bf2e2cfe4d717289efb">Commit</a></p>

<figure class="highlight">
  <pre><code class="language-csharp" data-lang="csharp"><span class="na">[Test]</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">IfInputNullEmptyWhiteSpace_Return_0</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">input</span> <span class="p">=</span> <span class="kt">string</span><span class="p">.</span><span class="n">Empty</span><span class="p">;</span>
            <span class="kt">var</span> <span class="n">expectedSum</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>

            <span class="kt">var</span> <span class="n">actualSum</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringCalculator</span><span class="p">().</span><span class="nf">SumFromString</span><span class="p">(</span><span class="n">input</span><span class="p">);</span>

            <span class="n">Assert</span><span class="p">.</span><span class="nf">That</span><span class="p">(</span><span class="n">actualSum</span><span class="p">,</span> <span class="n">Is</span><span class="p">.</span><span class="nf">EqualTo</span><span class="p">(</span><span class="n">expectedSum</span><span class="p">));</span>
        <span class="p">}</span></code></pre>
</figure>

<p>These is the test. Right now it is failing, to make it green I just added simple if clause. Due to simplicity no code in here</p>

<p><a href="https://github.com/michal-franc/BlogStuff/commit/3563df620a9edd6f353f1641505c6bfa777ae7d2">just commit link</a>.</p>

<h4>Step V - Next edge case</h4>

<p>What to do when input is not formatted correctly ? How to check it ? I am using split, in this simple form, the code does expect string in a correct format. I am assuming that if I can’t parse the string with the split function, then the input string is not correctly formated.</p>

<p><a href="https://github.com/michal-franc/BlogStuff/commit/6233dc9a063bb6b31318e9c0a80f2cc5d776946b">Commit</a></p>

<figure class="highlight">
  <pre><code class="language-csharp" data-lang="csharp"><span class="na">[Test]</span>
<span class="k">public</span> <span class="k">void</span> <span class="nf">IfInputNotFormatted_throws</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">input</span> <span class="p">=</span> <span class="s">"1,2,3,4,,,5"</span><span class="p">;</span>

    <span class="n">Assert</span><span class="p">.</span><span class="n">Throws</span><span class="p">&lt;</span><span class="n">InputStringNotFormatedProperly</span><span class="p">&gt;(</span>
         <span class="p">()</span> <span class="p">=&gt;</span> <span class="k">new</span> <span class="nf">StringCalculator</span><span class="p">().</span><span class="nf">SumFromString</span><span class="p">(</span><span class="n">input</span><span class="p">));</span>
<span class="p">}</span></code></pre>
</figure>

<p>As you can see the test is expecting custom exception. To be honest. I don’t know if the CustomException is needed here, maybe it would be better to just have a FormatException throwed here.</p>

<p><a href="https://github.com/michal-franc/BlogStuff/commit/ee3ebc827ed9ce8a61acc02bfaef4a25a5635ae2">Commit</a></p>

<figure class="highlight">
  <pre><code class="language-csharp" data-lang="csharp"><span class="k">try</span>
<span class="p">{</span>
     <span class="kt">var</span> <span class="n">values</span> <span class="p">=</span> <span class="n">input</span><span class="p">.</span><span class="nf">Split</span><span class="p">(</span><span class="sc">','</span><span class="p">);</span>
     <span class="k">return</span> <span class="n">values</span><span class="p">.</span><span class="nf">Select</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="kt">int</span><span class="p">.</span><span class="nf">Parse</span><span class="p">(</span><span class="n">x</span><span class="p">)).</span><span class="nf">Sum</span><span class="p">();</span>
<span class="p">}</span>
<span class="k">catch</span> <span class="p">(</span><span class="n">FormatException</span> <span class="n">ex</span><span class="p">)</span>
<span class="p">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nf">InputStringNotFormatedProperly</span><span class="p">(</span>
         <span class="kt">string</span><span class="p">.</span><span class="nf">Format</span><span class="p">(</span><span class="s">"Unexpected format input - {0}"</span><span class="p">,</span> <span class="n">input</span><span class="p">),</span> <span class="n">ex</span><span class="p">);</span>
<span class="p">}</span></code></pre>
</figure>

<h4>Things To note</h4>

<ul>
<li>all of the code is in one file, there is no need to separate anything, at least right now </li>
<li>my file still has a name of Class1.cs, I don't want to rename it in this early stage. Of course, I have to make sure that this mess won't leak into codebase later.</li>
</ul>

<h4>Summary</h4>

<ul>
<li>don't create class and methods on the start, write stuff inside the test method </li>
<li>start simple with code fulfilling the most basic requirmenet, don't focus on edge cases</li>
</ul>


      <span id="post-end"></span>
    </div>

    <div id="mc_embed_signup">
<form action="https://mfranc.us13.list-manage.com/subscribe/post?u=8a5865e28c59044d419ecbe95&amp;id=d545f31150" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
      <label for="mce-EMAIL">If you are interested in Cloud Native, Scalability, System Design and more meaty side of Engineering at Scale. Then subscribe to my mailing list.</label>
      <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
        <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_8a5865e28c59044d419ecbe95_d545f31150" tabindex="-1" value=""></div>
        <div class="clear">
          <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button">
        </div>
    </div>
</form>
</div>



    
<hr>

<aside id="comments" class="disqus">
  <div class="container">
    <h3><i class="icon icon-comments-o"></i> Comments</h3>
    <div id="disqus_thread"></div>
    <script>
      (function() {
        var d = document,
        s = d.createElement('script');
        s.src = '//thesilenceofthelams.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  </div>
</aside>



  </div>

</article>

      </div>


      <footer class="site-footer">
  <div class="container">
    <ul class="social">
  <li><a href="http://github.com/michal-franc" target="_blank"><i class="icon icon-github"></i></a></li>
  <li><a href="http://twitter.com/francmichal" target="_blank"><i class="icon icon-twitter"></i></a></li>
  <li><a href="http://facebook.com/michalfrancblog" target="_blank"><i class="icon icon-facebook"></i></a></li>
  <li><a href="https://uk.linkedin.com/in/michalfranc1" target="_blank"><i class="icon icon-linkedin"></i></a></li>
</ul>

    <p class="txt-medium-gray">
      <small>&copy;2018 All rights reserved. Made with <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> and ♥</small>
    </p>
  </div>
</footer>


      <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
	  <script type="text/javascript" src="/js/jquery.slick-modals.js"/></script>

	  <!-- <script id="ulp-remote" src="http://tools.mfranc.com/wp-content/plugins/layered-popups/js/remote.min.js?ver=5.89" data-handler="http://tools.mfranc.com/wp-admin/admin-ajax.php"></script>
	  <script>

		    (function ($) {
			"use strict";
			var objectPositionTop = $('#post-end').offset().top - window.innerHeight;

				ulp_add_event("onexit", {
					popup:		"4AXWiVSrZD71uqiP",
					mode:		"once-period",
					period:		30
				});

				ulp_add_event("onidle", {
					popup:		"85oltSbndJGZQzaW",
					mode:		"once-period",
					period:         30
				});

				ulp_add_event("onscroll", {
					popup:		"INyhHrwTzxjvcqEb",
					mode:		"once-period",
					period:         30,
					offset:		objectPositionTop / 2
				});

		    }(jQuery));

    </script> -->

		<script id="dsq-count-scr" src="//thesilenceofthelams.disqus.com/count.js" async></script>

		<div id="fb-root"></div>
		<script>(function(d, s, id) {
		  var js, fjs = d.getElementsByTagName(s)[0];
		  if (d.getElementById(id)) return;
		  js = d.createElement(s); js.id = id;
		  js.src = "//connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v2.7&appId=125980610784627";
		  fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'facebook-jssdk'));</script>
    </main>
  </body>
</html>
