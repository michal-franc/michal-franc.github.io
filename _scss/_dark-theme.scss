/*=====================================
=         Dark Theme (Darcula)        =
=====================================*/

// Dark theme color palette (matching the Darcula screenshot)
$dark-bg: #2B2B2B;
$dark-bg-lighter: #323232;
$dark-bg-card: #313335;
$dark-text: #A9B7C6;
$dark-text-muted: #808080;
$dark-heading-orange: #CC7832;
$dark-heading-purple: #9876AA;
$dark-link: #6897BB;
$dark-link-hover: #87939F;
$dark-border: #515151;
$dark-tag-green: #629755;
$dark-code-bg: #1E1E1E;

// Theme toggle button styles
.theme-toggle {
  position: relative;
  background: transparent;
  border: 2px solid $medium-gray-color;
  border-radius: 50%;
  width: 36px;
  height: 36px;
  cursor: pointer;
  transition: all 0.3s ease;
  float: right;
  margin-right: 10px;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;

  &:hover {
    border-color: $primary-color;
    background: rgba($primary-color, 0.1);
  }

  .theme-toggle-icon {
    &::before {
      content: "☀";
      font-size: 20px;
      display: block;
    }
  }

  @include media($mobile) {
    margin-right: 5px;
    width: 32px;
    height: 32px;

    .theme-toggle-icon::before {
      font-size: 18px;
    }
  }
}

// Dark theme active state
body.dark-theme {
  background: $dark-bg !important;
  color: $dark-text;

  // Update theme toggle icon for dark mode
  .theme-toggle {
    border-color: $dark-border;

    &:hover {
      border-color: $dark-heading-orange;
      background: rgba($dark-heading-orange, 0.1);
    }

    .theme-toggle-icon::before {
      content: "☾";
    }
  }

  // Header
  .site-header {
    background-color: $dark-bg-card;
    box-shadow: 2px 2px 2px 2px rgba(0, 0, 0, 0.3);

    h1 span {
      color: $dark-heading-orange;
    }

    a {
      color: $dark-text;

      &:hover,
      &:focus,
      &:active {
        color: $dark-heading-orange;
      }
    }
  }

  // Cards and containers - matching screenshot
  .card {
    background-color: $dark-bg;
    box-shadow: 2px 2px 2px 2px rgba(0, 0, 0, 0.3);
    color: $dark-text;
  }

  // Typography - matching screenshot
  h1, h2, h3, h4, h5, h6 {
    color: $dark-text;
  }

  // Post title (h1) should be purple like in screenshot
  .post-title {
    color: $dark-heading-purple !important;
  }

  // Article h1 headings should be purple
  .post-content h1 {
    color: $dark-heading-purple !important;
  }

  // h2 headings should be orange
  .post-content h2 {
    color: $dark-heading-orange !important;
  }

  // h3, h4 headings should be orange
  .post-content h3,
  .post-content h4 {
    color: $dark-heading-orange !important;
  }

  // h5, h6 should stay as regular text color
  .post-content h5,
  .post-content h6 {
    color: $dark-text;
  }

  // Strong/bold text in content should be orange (like in screenshot)
  .post-content strong {
    color: $dark-heading-orange;
  }

  // Links
  a {
    color: $dark-link;

    &:hover,
    &:focus,
    &:active {
      color: $dark-link-hover;
    }
  }

  .post-content a {
    color: $dark-link;

    &:hover {
      color: $dark-link-hover;
    }
  }

  // Post list
  .post-list .post a {
    color: $dark-text;

    &:hover,
    &:active,
    &:focus {
      color: $dark-heading-orange;
    }
  }

  // Tags - darker background like in screenshot
  .tag-badge {
    background: #444444;
    color: #A9B7C6 !important;

    &:hover,
    &:focus {
      background: #555555;
    }
  }

  // Footer
  .site-footer {
    background-color: $dark-bg-card;
    border-top: 1px solid $dark-border;
    color: $dark-text;
  }

  // Buttons
  .btn {
    background-color: $dark-bg-lighter;
    color: $dark-text;
    border-color: $dark-border;

    &:hover {
      background-color: $dark-heading-orange;
      border-color: $dark-heading-orange;
    }

    &.btn-ghost {
      background-color: transparent;
      border-color: $dark-heading-orange;
      color: $dark-heading-orange;

      &:hover {
        background-color: $dark-heading-orange;
        color: $dark-bg;
      }
    }
  }

  // Sliding panel
  .sliding-panel-button span {
    background: $dark-text;
  }

  .sliding-panel-content {
    background: $dark-bg-card;
    border-top-color: $dark-heading-orange;
  }

  // Navigation
  .navbar {
    li {
      border-bottom-color: $dark-border;
    }
  }

  // Text colors
  .text-muted {
    color: $dark-text-muted;
  }

  // Post layout - matching screenshot background
  .post-layout-container {
    background-color: $dark-bg;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
  }

  .post-main-content {
    border-right-color: $dark-border;
    background-color: $dark-bg;
  }

  .post-metadata-mobile {
    background-color: $dark-bg-lighter;
    border-bottom-color: $dark-border;
  }

  .post-metadata {
    border-bottom-color: $dark-border;

    .metadata-title {
      border-bottom-color: $dark-border;

      h3 {
        color: $dark-text-muted;
      }

      p {
        color: $dark-text;
      }
    }

    .metadata-separator {
      background-color: $dark-border;
    }

    .metadata-item {
      h3 {
        color: $dark-text-muted;
        font-size: rem(11);
      }

      p {
        color: $dark-text;
        font-size: rem(14);
      }
    }
  }

  // Post header metadata (Created date, etc)
  .post-header {
    p {
      color: $dark-text-muted;
    }
  }

  // TOC
  .post-toc {
    h2 {
      color: $dark-text-muted;
    }

    ol li {
      &::marker {
        color: $dark-text-muted;
      }

      a {
        color: $dark-text;

        &:hover {
          color: $dark-heading-orange;
        }
      }

      ol li {
        &::marker {
          color: $dark-text-muted;
        }

        a {
          color: $dark-text-muted;

          &:hover {
            color: $dark-heading-orange;
          }
        }
      }
    }

    .toc-comments-link a {
      color: $dark-text;

      &:hover {
        background-color: $dark-bg-lighter;
        color: $dark-heading-orange;
      }
    }
  }

  // Code blocks
  pre, code {
    background-color: $dark-code-bg;
    color: $dark-text;
    border-color: $dark-border;
  }

  // Blockquotes
  blockquote {
    background-color: $dark-bg-lighter;
    border-left-color: $dark-border;
    color: $dark-text;

    cite, footer {
      color: $dark-text-muted;
    }
  }

  // Series notes
  .seriesNote {
    background-color: $dark-bg-lighter;
    border-left-color: $dark-heading-orange;

    strong {
      color: $dark-heading-orange;
    }

    a {
      color: $dark-text;
      border-bottom-color: $dark-text-muted;

      &:hover {
        color: $dark-heading-orange;
        border-bottom-color: $dark-heading-orange;
      }
    }
  }

  // Pagination
  article[role="pagination"] {
    h5 {
      color: $dark-text-muted;
    }

    &:hover {
      background-color: $dark-bg-lighter;
    }
  }

  .pagination {
    .btn {
      color: $dark-text;
      border-color: $dark-border;
    }

    span {
      color: $dark-text-muted;
    }
  }

  // Social links
  .social {
    a {
      color: $dark-text-muted;

      &:hover,
      &:active,
      &:focus {
        color: $dark-heading-orange;
      }
    }
  }

  // Hero section (home page)
  .hero-inner {
    .dot {
      border-color: $dark-border;
    }

    em {
      color: $dark-heading-orange;
    }
  }

  // Category title
  .category-title {
    color: $dark-heading-orange;
  }

  // Main line
  .main-line-2 {
    color: $dark-heading-orange;
  }

  // Admonitions - dark theme
  .admonition {
    background-color: rgba(255, 255, 255, 0.05);

    .admonition-content {
      color: $dark-text;
    }

    .admonition-title::before {
      color: white;
    }
  }

  // Note / Info
  .admonition.ad-note,
  .admonition.ad-info {
    border-left-color: #5c9cff;
    background-color: rgba(68, 138, 255, 0.1);

    .admonition-title {
      color: #5c9cff;
      background-color: rgba(68, 138, 255, 0.15);

      &::before {
        background-color: #5c9cff;
      }
    }
  }

  // Abstract / Summary / TLDR
  .admonition.ad-abstract,
  .admonition.ad-summary,
  .admonition.ad-tldr {
    border-left-color: #3dbfff;
    background-color: rgba(0, 176, 255, 0.1);

    .admonition-title {
      color: #3dbfff;
      background-color: rgba(0, 176, 255, 0.15);

      &::before {
        background-color: #3dbfff;
      }
    }
  }

  // Tip / Hint / Important
  .admonition.ad-tip,
  .admonition.ad-hint,
  .admonition.ad-important {
    border-left-color: #00d4b5;
    background-color: rgba(0, 191, 165, 0.1);

    .admonition-title {
      color: #00d4b5;
      background-color: rgba(0, 191, 165, 0.15);

      &::before {
        background-color: #00d4b5;
      }
    }
  }

  // Success / Check / Done
  .admonition.ad-success,
  .admonition.ad-check,
  .admonition.ad-done {
    border-left-color: #00e563;
    background-color: rgba(0, 200, 83, 0.1);

    .admonition-title {
      color: #00e563;
      background-color: rgba(0, 200, 83, 0.15);

      &::before {
        background-color: #00e563;
      }
    }
  }

  // Question / Help / FAQ
  .admonition.ad-question,
  .admonition.ad-help,
  .admonition.ad-faq {
    border-left-color: #7af22d;
    background-color: rgba(100, 221, 23, 0.1);

    .admonition-title {
      color: #7af22d;
      background-color: rgba(100, 221, 23, 0.15);

      &::before {
        background-color: #7af22d;
      }
    }
  }

  // Warning / Caution / Attention
  .admonition.ad-warning,
  .admonition.ad-caution,
  .admonition.ad-attention {
    border-left-color: #ffad33;
    background-color: rgba(255, 152, 0, 0.1);

    .admonition-title {
      color: #ffad33;
      background-color: rgba(255, 152, 0, 0.15);

      &::before {
        background-color: #ffad33;
      }
    }
  }

  // Failure / Fail / Missing
  .admonition.ad-failure,
  .admonition.ad-fail,
  .admonition.ad-missing {
    border-left-color: #ff6b6b;
    background-color: rgba(255, 82, 82, 0.1);

    .admonition-title {
      color: #ff6b6b;
      background-color: rgba(255, 82, 82, 0.15);

      &::before {
        background-color: #ff6b6b;
      }
    }
  }

  // Danger / Error
  .admonition.ad-danger,
  .admonition.ad-error {
    border-left-color: #ff5566;
    background-color: rgba(255, 23, 68, 0.1);

    .admonition-title {
      color: #ff5566;
      background-color: rgba(255, 23, 68, 0.15);

      &::before {
        background-color: #ff5566;
      }
    }
  }

  // Bug
  .admonition.ad-bug {
    border-left-color: #ff3377;
    background-color: rgba(245, 0, 87, 0.1);

    .admonition-title {
      color: #ff3377;
      background-color: rgba(245, 0, 87, 0.15);

      &::before {
        background-color: #ff3377;
      }
    }
  }

  // Example
  .admonition.ad-example {
    border-left-color: #9a6fff;
    background-color: rgba(124, 77, 255, 0.1);

    .admonition-title {
      color: #9a6fff;
      background-color: rgba(124, 77, 255, 0.15);

      &::before {
        background-color: #9a6fff;
      }
    }
  }

  // Quote / Cite
  .admonition.ad-quote,
  .admonition.ad-cite {
    border-left-color: #b0b0b0;
    background-color: rgba(158, 158, 158, 0.1);

    .admonition-title {
      color: #b0b0b0;
      background-color: rgba(158, 158, 158, 0.15);

      &::before {
        background-color: #b0b0b0;
      }
    }
  }
}
