/*=====================================
=         Dark Theme (Dracula)        =
=====================================*/

// Dracula theme color palette
$dark-bg: #282a36;
$dark-bg-lighter: #44475a;
$dark-bg-card: #44475a;
$dark-bg-secondary: #20212B;
$dark-text: #f8f8f2;
$dark-text-muted: #6272a4;
$dark-heading-purple: #bd93f9;
$dark-heading-orange: #ffb86c;
$dark-heading-green: #50fa7b;
$dark-heading-red: #ff5555;
$dark-heading-yellow: #f1fa8c;
$dark-link: #8be9fd;
$dark-link-hover: #50fa7b;
$dark-border: #44475a;
$dark-tag-green: #50fa7b;
$dark-code-bg: #20212B;
$dark-pink: #ff79c6;
$dark-comment: #6272a4;

// Theme toggle button styles
.theme-toggle {
  position: relative;
  background: transparent;
  border: 2px solid $medium-gray-color;
  border-radius: 50%;
  width: 36px;
  height: 36px;
  cursor: pointer;
  transition: all 0.3s ease;
  float: right;
  margin-right: 10px;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;

  &:hover {
    border-color: $primary-color;
    background: rgba($primary-color, 0.1);
  }

  .theme-toggle-icon {
    &::before {
      content: "☀";
      font-size: 20px;
      display: block;
    }
  }

  @include media($mobile) {
    margin-right: 5px;
    width: 32px;
    height: 32px;

    .theme-toggle-icon::before {
      font-size: 18px;
    }
  }
}

// Dark theme active state
body.dark-theme {
  background: $dark-bg !important;
  color: $dark-text;

  // Update theme toggle icon for dark mode
  .theme-toggle {
    border-color: $dark-border;

    &:hover {
      border-color: $dark-heading-orange;
      background: rgba($dark-heading-orange, 0.1);
    }

    .theme-toggle-icon::before {
      content: "☾";
    }
  }

  // Header
  .site-header {
    background-color: $dark-bg-card;
    box-shadow: 2px 2px 2px 2px rgba(0, 0, 0, 0.3);

    h1 span {
      color: $dark-heading-orange;
    }

    a {
      color: $dark-text;

      &:hover,
      &:focus,
      &:active {
        color: $dark-heading-orange;
      }
    }
  }

  // Cards and containers - matching screenshot
  .card {
    background-color: $dark-bg;
    box-shadow: 2px 2px 2px 2px rgba(0, 0, 0, 0.3);
    color: $dark-text;
  }

  // Typography - matching screenshot
  h1, h2, h3, h4, h5, h6 {
    color: $dark-text;
  }

  // Post title (h1) should be purple like in screenshot
  .post-title {
    color: $dark-heading-purple !important;
  }

  // Article h1 headings should be purple
  .post-content h1 {
    color: $dark-heading-purple !important;
  }

  // h2 headings should be orange
  .post-content h2 {
    color: $dark-heading-orange !important;
  }

  // h3, h4 headings should be orange
  .post-content h3,
  .post-content h4 {
    color: $dark-heading-orange !important;
  }

  // h5, h6 should stay as regular text color
  .post-content h5,
  .post-content h6 {
    color: $dark-text;
  }

  // Strong/bold text in content should be orange (like in screenshot)
  .post-content strong {
    color: $dark-heading-orange;
  }

  // Links
  a {
    color: $dark-link;

    &:hover,
    &:focus,
    &:active {
      color: $dark-link-hover;
    }
  }

  .post-content a {
    color: $dark-link;

    &:hover {
      color: $dark-link-hover;
    }
  }

  // Post list
  .post-list .post a {
    color: $dark-text;

    &:hover,
    &:active,
    &:focus {
      color: $dark-heading-orange;
    }
  }

  // Tags - Dracula green accent
  .tag-badge {
    background: $dark-bg-secondary;
    color: $dark-tag-green !important;

    &:hover,
    &:focus {
      background: $dark-bg-lighter;
    }
  }

  // Footer
  .site-footer {
    background-color: $dark-bg-card;
    border-top: 1px solid $dark-border;
    color: $dark-text;
  }

  // Buttons
  .btn {
    background-color: $dark-bg-lighter;
    color: $dark-text;
    border-color: $dark-border;

    &:hover {
      background-color: $dark-heading-orange;
      border-color: $dark-heading-orange;
    }

    &.btn-ghost {
      background-color: transparent;
      border-color: $dark-heading-orange;
      color: $dark-heading-orange;

      &:hover {
        background-color: $dark-heading-orange;
        color: $dark-bg;
      }
    }
  }

  // Sliding panel
  .sliding-panel-button span {
    background: $dark-text;
  }

  .sliding-panel-content {
    background: $dark-bg-card;
    border-top-color: $dark-heading-orange;
  }

  // Navigation
  .navbar {
    li {
      border-bottom-color: $dark-border;
    }
  }

  // Text colors
  .text-muted {
    color: $dark-text-muted;
  }

  // Post layout - matching screenshot background
  .post-layout-container {
    background-color: $dark-bg;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
  }

  .post-main-content {
    border-right-color: $dark-border;
    background-color: $dark-bg;
  }

  .post-metadata-mobile {
    background-color: $dark-bg-lighter;
    border-bottom-color: $dark-border;
  }

  .post-metadata {
    border-bottom-color: $dark-border;

    .metadata-title {
      border-bottom-color: $dark-border;

      h3 {
        color: $dark-text-muted;
      }

      p {
        color: $dark-text;
      }
    }

    .metadata-separator {
      background-color: $dark-border;
    }

    .metadata-item {
      h3 {
        color: $dark-text-muted;
        font-size: rem(11);
      }

      p {
        color: $dark-text;
        font-size: rem(14);
      }
    }
  }

  // Post header metadata (Created date, etc)
  .post-header {
    p {
      color: $dark-text-muted;
    }
  }

  // TOC
  .post-toc {
    h2 {
      color: $dark-text-muted;
    }

    ol li {
      &::marker {
        color: $dark-text-muted;
      }

      a {
        color: $dark-text;

        &:hover {
          color: $dark-heading-orange;
        }
      }

      ol li {
        &::marker {
          color: $dark-text-muted;
        }

        a {
          color: $dark-text-muted;

          &:hover {
            color: $dark-heading-orange;
          }
        }
      }
    }

    .toc-comments-link a {
      color: $dark-text;

      &:hover {
        background-color: $dark-bg-lighter;
        color: $dark-heading-orange;
      }
    }
  }

  // Code blocks
  pre, code {
    background-color: $dark-code-bg;
    color: $dark-text;
    border-color: $dark-border;
  }

  // Blockquotes
  blockquote {
    background-color: $dark-bg-lighter;
    border-left-color: $dark-heading-purple;
    color: $dark-text;

    cite, footer {
      color: $dark-text-muted;
    }
  }

  // Series notes
  .seriesNote {
    background-color: $dark-bg-lighter;
    border-left-color: $dark-heading-orange;

    strong {
      color: $dark-heading-orange;
    }

    a {
      color: $dark-text;
      border-bottom-color: $dark-text-muted;

      &:hover {
        color: $dark-heading-orange;
        border-bottom-color: $dark-heading-orange;
      }
    }
  }

  // Pagination
  article[role="pagination"] {
    h5 {
      color: $dark-text-muted;
    }

    &:hover {
      background-color: $dark-bg-lighter;
    }
  }

  .pagination {
    .btn {
      color: $dark-text;
      border-color: $dark-border;
    }

    span {
      color: $dark-text-muted;
    }
  }

  // Social links
  .social {
    a {
      color: $dark-text-muted;

      &:hover,
      &:active,
      &:focus {
        color: $dark-heading-orange;
      }
    }
  }

  // Hero section (home page)
  .hero-inner {
    .dot {
      border-color: $dark-border;
    }

    em {
      color: $dark-heading-orange;
    }
  }

  // Category title
  .category-title {
    color: $dark-heading-orange;
  }

  // Main line
  .main-line-2 {
    color: $dark-heading-orange;
  }

  // Admonitions - dark theme
  .admonition {
    background-color: rgba(255, 255, 255, 0.05);

    .admonition-content {
      color: $dark-text;
    }

    .admonition-title::before {
      color: white;
    }
  }

  // Note / Info - Dracula cyan
  .admonition.ad-note,
  .admonition.ad-info {
    border-left-color: $dark-link;
    background-color: rgba(139, 233, 253, 0.1);

    .admonition-title {
      color: $dark-link;
      background-color: rgba(139, 233, 253, 0.15);

      &::before {
        background-color: $dark-link;
      }
    }
  }

  // Abstract / Summary / TLDR
  .admonition.ad-abstract,
  .admonition.ad-summary,
  .admonition.ad-tldr {
    border-left-color: #3dbfff;
    background-color: rgba(0, 176, 255, 0.1);

    .admonition-title {
      color: #3dbfff;
      background-color: rgba(0, 176, 255, 0.15);

      &::before {
        background-color: #3dbfff;
      }
    }
  }

  // Tip / Hint / Important - Dracula green
  .admonition.ad-tip,
  .admonition.ad-hint,
  .admonition.ad-important {
    border-left-color: $dark-heading-green;
    background-color: rgba(80, 250, 123, 0.1);

    .admonition-title {
      color: $dark-heading-green;
      background-color: rgba(80, 250, 123, 0.15);

      &::before {
        background-color: $dark-heading-green;
      }
    }
  }

  // Success / Check / Done - Dracula green
  .admonition.ad-success,
  .admonition.ad-check,
  .admonition.ad-done {
    border-left-color: $dark-heading-green;
    background-color: rgba(80, 250, 123, 0.1);

    .admonition-title {
      color: $dark-heading-green;
      background-color: rgba(80, 250, 123, 0.15);

      &::before {
        background-color: $dark-heading-green;
      }
    }
  }

  // Question / Help / FAQ - Dracula yellow
  .admonition.ad-question,
  .admonition.ad-help,
  .admonition.ad-faq {
    border-left-color: $dark-heading-yellow;
    background-color: rgba(241, 250, 140, 0.1);

    .admonition-title {
      color: $dark-heading-yellow;
      background-color: rgba(241, 250, 140, 0.15);

      &::before {
        background-color: $dark-heading-yellow;
      }
    }
  }

  // Warning / Caution / Attention - Dracula orange
  .admonition.ad-warning,
  .admonition.ad-caution,
  .admonition.ad-attention {
    border-left-color: $dark-heading-orange;
    background-color: rgba(255, 184, 108, 0.1);

    .admonition-title {
      color: $dark-heading-orange;
      background-color: rgba(255, 184, 108, 0.15);

      &::before {
        background-color: $dark-heading-orange;
      }
    }
  }

  // Failure / Fail / Missing - Dracula red
  .admonition.ad-failure,
  .admonition.ad-fail,
  .admonition.ad-missing {
    border-left-color: $dark-heading-red;
    background-color: rgba(255, 85, 85, 0.1);

    .admonition-title {
      color: $dark-heading-red;
      background-color: rgba(255, 85, 85, 0.15);

      &::before {
        background-color: $dark-heading-red;
      }
    }
  }

  // Danger / Error - Dracula red
  .admonition.ad-danger,
  .admonition.ad-error {
    border-left-color: $dark-heading-red;
    background-color: rgba(255, 85, 85, 0.1);

    .admonition-title {
      color: $dark-heading-red;
      background-color: rgba(255, 85, 85, 0.15);

      &::before {
        background-color: $dark-heading-red;
      }
    }
  }

  // Bug - Dracula pink
  .admonition.ad-bug {
    border-left-color: $dark-pink;
    background-color: rgba(255, 121, 198, 0.1);

    .admonition-title {
      color: $dark-pink;
      background-color: rgba(255, 121, 198, 0.15);

      &::before {
        background-color: $dark-pink;
      }
    }
  }

  // Example - Dracula purple
  .admonition.ad-example {
    border-left-color: $dark-heading-purple;
    background-color: rgba(189, 147, 249, 0.1);

    .admonition-title {
      color: $dark-heading-purple;
      background-color: rgba(189, 147, 249, 0.15);

      &::before {
        background-color: $dark-heading-purple;
      }
    }
  }

  // Quote / Cite - Dracula comment color
  .admonition.ad-quote,
  .admonition.ad-cite {
    border-left-color: $dark-comment;
    background-color: rgba(98, 114, 164, 0.1);

    .admonition-title {
      color: $dark-comment;
      background-color: rgba(98, 114, 164, 0.15);

      &::before {
        background-color: $dark-comment;
      }
    }
  }
}
